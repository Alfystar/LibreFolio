{
  "openapi": "3.1.0",
  "info": {
    "title": "LibreFolio",
    "version": "0.1.0"
  },
  "paths": {
    "/api/v1/fx/providers": {
      "get": {
        "tags": [
          "FX (Forex)",
          "FX Providers"
        ],
        "summary": "List Providers",
        "description": "Get the list of all available FX rate providers.\n\nReturns information about each provider including:\n- Provider code and name\n- Default base currency\n- All supported base currencies (for multi-base providers)\n- Description\n- Icon URL\n\nReturns:\n    List of provider information",
        "operationId": "list_providers_api_v1_fx_providers_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "items": {
                    "$ref": "#/components/schemas/FXProviderInfo"
                  },
                  "type": "array",
                  "title": "Response List Providers Api V1 Fx Providers Get"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/fx/providers/pair-sources": {
      "get": {
        "tags": [
          "FX (Forex)",
          "FX Providers"
        ],
        "summary": "List Pair Sources",
        "description": "Get the list of configured currency pair sources.\n\nReturns all configured mappings of currency pairs to providers,\nordered by base, quote, and priority.\n\nReturns:\n    List of pair source configurations",
        "operationId": "list_pair_sources_api_v1_fx_providers_pair_sources_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/FXPairSourcesResponse"
                }
              }
            }
          }
        }
      },
      "post": {
        "tags": [
          "FX (Forex)",
          "FX Providers"
        ],
        "summary": "Create Pair Sources Bulk",
        "description": "Create or update multiple currency pair sources in a single atomic transaction.\n\nValidations:\n- base < quote (alphabetical ordering)\n- Provider code must be registered in FXProviderRegistry\n- Priority must be >= 1\n\nArgs:\n    sources: List of pair sources to create/update\n    session: Database session\n\nReturns:\n    Results for each pair source operation",
        "operationId": "create_pair_sources_bulk_api_v1_fx_providers_pair_sources_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "items": {
                  "$ref": "#/components/schemas/FXPairSourceItem"
                },
                "type": "array",
                "title": "Sources"
              }
            }
          },
          "required": true
        },
        "responses": {
          "201": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/FXCreatePairSourcesResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "delete": {
        "tags": [
          "FX (Forex)",
          "FX Providers"
        ],
        "summary": "Delete Pair Sources Bulk",
        "description": "Delete multiple currency pair sources.\n\nIf priority is specified, deletes only that specific priority level.\nIf priority is omitted, deletes ALL priorities for that pair.\n\nWarnings (not errors):\n- If a pair doesn't exist, logs a warning but continues\n\nArgs:\n    sources: List of FXDeletePairSourceItem to delete\n    session: Database session\n\nReturns:\n    FXDeletePairSourcesResponse with results for each deletion operation",
        "operationId": "delete_pair_sources_bulk_api_v1_fx_providers_pair_sources_delete",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "items": {
                  "$ref": "#/components/schemas/FXDeletePairSourceItem"
                },
                "type": "array",
                "title": "Sources"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/FXDeletePairSourcesResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/fx/currencies": {
      "get": {
        "tags": [
          "FX (Forex)",
          "FX Currencies"
        ],
        "summary": "List Currencies",
        "description": "Get the list of available currencies from specified provider.\n\nArgs:\n    provider: Provider code (default: ECB)\n\nReturns:\n    List of ISO 4217 currency codes",
        "operationId": "list_currencies_api_v1_fx_currencies_get",
        "parameters": [
          {
            "name": "provider",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "description": "Provider code (ECB, FED, BOE, SNB)",
              "default": "ECB",
              "title": "Provider"
            },
            "description": "Provider code (ECB, FED, BOE, SNB)"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/FXCurrenciesResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/fx/currencies/sync": {
      "get": {
        "tags": [
          "FX (Forex)",
          "FX Currencies"
        ],
        "summary": "Sync Rates",
        "description": "Synchronize FX rates for the specified date range and currencies.\n\n**Two modes of operation**:\n\n1. **Explicit Provider Mode** (provider parameter specified):\n   - Forces the specified provider for all currencies\n   - Ignores fx_currency_pair_sources configuration\n   - Backward compatible with previous API\n\n2. **Auto-Configuration Mode** (provider=NULL):\n   - Consults fx_currency_pair_sources table\n   - Uses priority=1 provider for each currency pair\n   - Fails with explicit error if configuration missing\n\nArgs:\n    start: Start date (inclusive)\n    end: End date (inclusive)\n    currencies: Comma-separated currency codes (e.g., \"USD,GBP,CHF\")\n    provider: (Optional) Force specific provider. If NULL, uses configuration.\n    base_currency: (Optional) Base currency for multi-base providers\n    session: Database session\n\nReturns:\n    Sync statistics",
        "operationId": "sync_rates_api_v1_fx_currencies_sync_get",
        "parameters": [
          {
            "name": "start",
            "in": "query",
            "required": true,
            "schema": {
              "type": "string",
              "format": "date",
              "description": "Start date (inclusive)",
              "title": "Start"
            },
            "description": "Start date (inclusive)"
          },
          {
            "name": "end",
            "in": "query",
            "required": true,
            "schema": {
              "type": "string",
              "format": "date",
              "description": "End date (inclusive)",
              "title": "End"
            },
            "description": "End date (inclusive)"
          },
          {
            "name": "currencies",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "description": "Comma-separated currency codes",
              "default": "USD,GBP,CHF,JPY",
              "title": "Currencies"
            },
            "description": "Comma-separated currency codes"
          },
          {
            "name": "provider",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Provider code (ECB, FED, BOE, SNB). If NULL, uses fx_currency_pair_sources configuration.",
              "title": "Provider"
            },
            "description": "Provider code (ECB, FED, BOE, SNB). If NULL, uses fx_currency_pair_sources configuration."
          },
          {
            "name": "base_currency",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Base currency (for multi-base providers)",
              "title": "Base Currency"
            },
            "description": "Base currency (for multi-base providers)"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/FXSyncResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/fx/currencies/rate": {
      "post": {
        "tags": [
          "FX (Forex)",
          "FX Currencies"
        ],
        "summary": "Upsert Rates Endpoint",
        "description": "Manually insert or update one or more FX rates (bulk operation).\n\nThis endpoint accepts a list of rates to insert/update.\n\nUses UPSERT logic: if a rate for the same date/base/quote exists, it will be updated.\nAutomatic alphabetical ordering and rate inversion is applied.\n\nArgs:\n    rates: List of rates to insert/update\n    session: Database session\n\nReturns:\n    Operation results with action taken (inserted/updated) for each rate",
        "operationId": "upsert_rates_endpoint_api_v1_fx_currencies_rate_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "items": {
                  "$ref": "#/components/schemas/FXUpsertItem"
                },
                "type": "array",
                "title": "Rates"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/FXBulkUpsertResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "delete": {
        "tags": [
          "FX (Forex)",
          "FX Currencies"
        ],
        "summary": "Delete Rates Endpoint",
        "description": "Delete one or more FX rates (bulk operation).\n\nThis endpoint accepts a list of deletion requests. Each request can specify a date range\nto delete rates (using DateRangeModel).\n\nCurrency pairs are automatically normalized to alphabetical order in the backend,\nso deleting USD/EUR will delete the stored EUR/USD rate.\n\nArgs:\n    deletions: List of deletion requests with date ranges\n    session: Database session\n\nReturns:\n    Deletion results with counts (existing vs deleted) for each request\n\nExample:\n    DELETE /fx/rate-set/bulk\n    {\n        \"deletions\": [\n            {\n                \"from\": \"EUR\",\n                \"to\": \"USD\",\n                \"start_date\": \"2025-01-01\"\n            },\n            {\n                \"from\": \"GBP\",\n                \"to\": \"USD\",\n                \"start_date\": \"2025-01-01\",\n                \"end_date\": \"2025-01-05\"\n            }\n        ]\n    }",
        "operationId": "delete_rates_endpoint_api_v1_fx_currencies_rate_delete",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "items": {
                  "$ref": "#/components/schemas/FXDeleteItem"
                },
                "type": "array",
                "title": "Deletions"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/FXBulkDeleteResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/fx/currencies/convert": {
      "post": {
        "tags": [
          "FX (Forex)",
          "FX Currencies"
        ],
        "summary": "Convert Currency Bulk",
        "description": "Convert one or more amounts between currencies (bulk operation).\n\nThis endpoint accepts a list of conversions to perform. Each conversion can specify:\n- A single date (start_date only) for single-day conversion\n- A date range (start_date + end_date) for multi-day conversion\n\nWhen a date range is specified, the conversion is automatically expanded to process\neach day in the range individually (both start_date and end_date are inclusive).\n\nUses unlimited backward-fill logic: if rate for exact date is not available,\nuses the most recent rate before the requested date.\n\nArgs:\n    request: List of conversions to perform\n    session: Database session\n\nReturns:\n    Conversion results with rate information for each conversion (one result per day)",
        "operationId": "convert_currency_bulk_api_v1_fx_currencies_convert_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "items": {
                  "$ref": "#/components/schemas/FXConversionRequest"
                },
                "type": "array",
                "title": "Request"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/FXConvertResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/assets": {
      "post": {
        "tags": [
          "FA (Financial Assets)",
          "FA CRUD"
        ],
        "summary": "Create Assets Bulk",
        "description": "Create multiple assets in bulk (partial success allowed).\n\nCreates asset records with optional classification metadata.\nProvider assignment can be done separately via POST /assets/provider.\n\n**Request Example**:\n```json\n[\n  {\n    \"display_name\": \"Apple Inc.\",\n    \"currency\": \"USD\",\n    \"asset_type\": \"STOCK\",\n    \"icon_url\": \"https://example.com/aapl.png\",\n    \"classification_params\": {\n      \"sector\": \"Technology\",\n      \"geographic_area\": {\"USA\": \"1.0\"}\n    }\n  }\n]\n```\n\n**Response Example**:\n```json\n{\n  \"results\": [\n    {\n      \"asset_id\": 1,\n      \"success\": true,\n      \"message\": \"Asset created successfully\",\n      \"display_name\": \"Apple Inc.\"\n    }\n  ],\n  \"success_count\": 1,\n  \"failed_count\": 0\n}\n```",
        "operationId": "create_assets_bulk_api_v1_assets_post",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "array",
                "items": {
                  "$ref": "#/components/schemas/FAAssetCreateItem"
                },
                "title": "Assets"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/FABulkAssetCreateResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "patch": {
        "tags": [
          "FA (Financial Assets)",
          "FA CRUD"
        ],
        "summary": "Patch Assets Bulk",
        "description": "Update multiple assets in bulk (partial success allowed).\n\n**Merge Logic**:\n- Field present (even if None): UPDATE or BLANK value\n- Field absent: IGNORE (keep existing value)\n\n**Example Request**:\n```json\n[\n  {\n    \"asset_id\": 1,\n    \"display_name\": \"Apple Inc. - Updated\",\n    \"classification_params\": {\n      \"sector\": \"Technology\",\n      \"short_description\": \"New description\"\n    }\n  },\n  {\n    \"asset_id\": 2,\n    \"classification_params\": null,\n    \"active\": false\n  }\n]\n```\n\n**Classification Params Optimization**:\n- If None: Clears metadata (DB column set to NULL)\n- If present: Only non-null subfields saved to DB (JSON optimization)\n\n**Response Fields**:\n- `updated_fields`: List of field names actually changed\n- Per-item success/failure status",
        "operationId": "patch_assets_bulk_api_v1_assets_patch",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "array",
                "items": {
                  "$ref": "#/components/schemas/FAAssetPatchItem"
                },
                "title": "Assets"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/FABulkAssetPatchResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "delete": {
        "tags": [
          "FA (Financial Assets)",
          "FA CRUD"
        ],
        "summary": "Delete Assets Bulk",
        "description": "Delete multiple assets in bulk (partial success allowed).\n\n**Warning**: This will CASCADE DELETE:\n- Provider assignments (asset_provider_assignments table)\n- Price history (price_history table)\n\n**Blocks deletion** if asset has transactions (foreign key constraint).\n\n**Request Example**:\n```\nDELETE /api/v1/assets?asset_ids=1&asset_ids=2&asset_ids=3\n```\n\n**Response Example**:\n```json\n{\n  \"results\": [\n    {\n      \"asset_id\": 1,\n      \"success\": true,\n      \"message\": \"Asset deleted successfully\"\n    },\n    {\n      \"asset_id\": 2,\n      \"success\": false,\n      \"message\": \"Cannot delete asset 2: has existing transactions\"\n    }\n  ],\n  \"success_count\": 1,\n  \"failed_count\": 1\n}\n```",
        "operationId": "delete_assets_bulk_api_v1_assets_delete",
        "parameters": [
          {
            "name": "asset_ids",
            "in": "query",
            "required": true,
            "schema": {
              "type": "array",
              "items": {
                "type": "integer"
              },
              "minItems": 1,
              "description": "List of asset IDs to delete",
              "title": "Asset Ids"
            },
            "description": "List of asset IDs to delete"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/FABulkAssetDeleteResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "get": {
        "tags": [
          "FA (Financial Assets)",
          "FA CRUD"
        ],
        "summary": "Read Assets Bulk",
        "description": "Bulk read assets with classification metadata (preserves request order).\n\nFetches basic asset information along with parsed classification_params\nfor multiple assets in a single request. Assets not found are silently\nskipped.\n\n**Request query**:\n```json\nGET /api/v1/assets?asset_ids=1&asset_ids=2&asset_ids=3\n```\n\n**Response** (ordered by request):\n```json\n[\n  {\n    \"asset_id\": 1,\n    \"display_name\": \"Apple Inc.\",\n    \"identifier\": \"AAPL\",\n    \"currency\": \"USD\",\n    \"asset_type\": \"stock\",\n    \"classification_params\": {\n      \"sector\": \"Technology\",\n      \"short_description\": \"Consumer electronics\",\n      \"geographic_area\": {\n        \"USA\": \"1.0000\"\n      }\n    },\n    has_provider: false\n  },\n  {\n    \"asset_id\": 2,\n    \"display_name\": \"Vanguard S&P 500\",\n    \"identifier\": \"VOO\",\n    \"currency\": \"USD\",\n    \"asset_type\": \"etf\",\n    \"classification_params\": {\n      \"geographic_area\": {\n        \"USA\": \"1.0000\"\n      }\n    },\n    has_provider: true\n  }\n]\n```\n\n**Classification Params**:\n- Parsed from JSON stored in database\n- May be null if no metadata set\n- Geographic area contains ISO-3166-A3 codes\n- Weights are Decimal strings (4 decimal places)\n\nArgs:\n    asset_ids: Bulk read request with list of asset IDs\n    session: Database session\n\nReturns:\n    List of FAAssetMetadataResponse in request order (missing assets skipped)\n\nRaises:\n    HTTPException: 500 if unexpected error occurs",
        "operationId": "read_assets_bulk_api_v1_assets_get",
        "parameters": [
          {
            "name": "asset_ids",
            "in": "query",
            "required": true,
            "schema": {
              "type": "array",
              "items": {
                "type": "integer"
              },
              "description": "List of asset IDs to read",
              "title": "Asset Ids"
            },
            "description": "List of asset IDs to read"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/FAAssetMetadataResponse"
                  },
                  "title": "Response Read Assets Bulk Api V1 Assets Get"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/assets/all": {
      "get": {
        "tags": [
          "FA (Financial Assets)",
          "FA CRUD"
        ],
        "summary": "Get All Assets",
        "description": "Get all active assets without filters.\n\nSimple endpoint for frontend to load complete asset list.\nReturns all active assets with identifier info.\n\n**Response Fields**:\n- `identifier`: Asset identifier (ticker, ISIN, etc.) if provider assigned\n- `identifier_type`: Type of identifier (TICKER, ISIN, UUID, OTHER)",
        "operationId": "get_all_assets_api_v1_assets_all_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "items": {
                    "$ref": "#/components/schemas/FAinfoResponse"
                  },
                  "type": "array",
                  "title": "Response Get All Assets Api V1 Assets All Get"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/assets/query": {
      "get": {
        "tags": [
          "FA (Financial Assets)",
          "FA CRUD"
        ],
        "summary": "List Assets",
        "description": "List all assets with optional filters - enhanced for BRIM asset matching.\n\n**Query Parameters**:\n- `currency`: Filter by currency code (e.g., \"USD\", \"EUR\")\n- `asset_type`: Filter by type enum (STOCK, ETF, BOND, etc.)\n- `active`: Include only active assets (default: true)\n- `search`: Search text in display_name (case-insensitive partial match)\n- `isin`: Exact ISIN match\n- `ticker`: Exact ticker match\n- `cusip`: Exact CUSIP match\n- `sedol`: Exact SEDOL match\n- `figi`: Exact FIGI match\n- `uuid`: Exact UUID match\n- `identifier_other`: Partial match in identifier_other field\n- `identifier_contains`: Partial match in any identifier\n\n**Response Fields**:\n- `has_provider`: True if asset has a pricing provider assigned\n- `has_metadata`: True if asset has classification metadata\n- `identifier`: Asset identifier (ticker, ISIN, etc.) if provider assigned\n- `identifier_type`: Type of identifier (TICKER, ISIN, UUID, OTHER)\n\n**Example**:\n```\nGET /api/v1/assets/query?currency=USD&asset_type=STOCK&search=Apple\nGET /api/v1/assets/query?isin=US0378331005\nGET /api/v1/assets/query?ticker=AAPL\n```",
        "operationId": "list_assets_api_v1_assets_query_get",
        "parameters": [
          {
            "name": "currency",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Filter by currency (ISO 4217, e.g., USD)",
              "title": "Currency"
            },
            "description": "Filter by currency (ISO 4217, e.g., USD)"
          },
          {
            "name": "asset_type",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "$ref": "#/components/schemas/AssetType"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Filter by asset type enum",
              "title": "Asset Type"
            },
            "description": "Filter by asset type enum"
          },
          {
            "name": "active",
            "in": "query",
            "required": false,
            "schema": {
              "type": "boolean",
              "description": "Include only active assets (default: true)",
              "default": true,
              "title": "Active"
            },
            "description": "Include only active assets (default: true)"
          },
          {
            "name": "search",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Search in display_name (partial match)",
              "title": "Search"
            },
            "description": "Search in display_name (partial match)"
          },
          {
            "name": "isin",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Exact ISIN match",
              "title": "Isin"
            },
            "description": "Exact ISIN match"
          },
          {
            "name": "ticker",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Exact ticker match",
              "title": "Ticker"
            },
            "description": "Exact ticker match"
          },
          {
            "name": "cusip",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Exact CUSIP match",
              "title": "Cusip"
            },
            "description": "Exact CUSIP match"
          },
          {
            "name": "sedol",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Exact SEDOL match",
              "title": "Sedol"
            },
            "description": "Exact SEDOL match"
          },
          {
            "name": "figi",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Exact FIGI match",
              "title": "Figi"
            },
            "description": "Exact FIGI match"
          },
          {
            "name": "uuid",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Exact UUID match",
              "title": "Uuid"
            },
            "description": "Exact UUID match"
          },
          {
            "name": "identifier_other",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Partial match in identifier_other",
              "title": "Identifier Other"
            },
            "description": "Partial match in identifier_other"
          },
          {
            "name": "identifier_contains",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Partial match in any identifier field",
              "title": "Identifier Contains"
            },
            "description": "Partial match in any identifier field"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/FAinfoResponse"
                  },
                  "title": "Response List Assets Api V1 Assets Query Get"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/assets/prices": {
      "post": {
        "tags": [
          "FA (Financial Assets)",
          "FA Prices"
        ],
        "summary": "Upsert Prices Bulk",
        "description": "Bulk upsert prices manually (PRIMARY bulk endpoint).",
        "operationId": "upsert_prices_bulk_api_v1_assets_prices_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "items": {
                  "$ref": "#/components/schemas/FAUpsert"
                },
                "type": "array",
                "title": "Assets"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/FABulkUpsertResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "delete": {
        "tags": [
          "FA (Financial Assets)",
          "FA Prices"
        ],
        "summary": "Delete Prices Bulk",
        "description": "Bulk delete price ranges (PRIMARY bulk endpoint).",
        "operationId": "delete_prices_bulk_api_v1_assets_prices_delete",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "items": {
                  "$ref": "#/components/schemas/FAAssetDelete"
                },
                "type": "array",
                "title": "Assets"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/FABulkDeleteResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/assets/prices/{asset_id}": {
      "get": {
        "tags": [
          "FA (Financial Assets)",
          "FA Prices"
        ],
        "summary": "Get Prices",
        "description": "Get prices for asset with backward-fill support.\n\nReturns a list of FAPricePoint with OHLC data, volume, and backward-fill info.",
        "operationId": "get_prices_api_v1_assets_prices__asset_id__get",
        "parameters": [
          {
            "name": "asset_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "title": "Asset Id"
            }
          },
          {
            "name": "start_date",
            "in": "query",
            "required": true,
            "schema": {
              "type": "string",
              "format": "date",
              "description": "Start date (required)",
              "title": "Start Date"
            },
            "description": "Start date (required)"
          },
          {
            "name": "end_date",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string",
                  "format": "date"
                },
                {
                  "type": "null"
                }
              ],
              "description": "End date (optional, defaults to start_date)",
              "title": "End Date"
            },
            "description": "End date (optional, defaults to start_date)"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/FAPricePoint-Output"
                  },
                  "title": "Response Get Prices Api V1 Assets Prices  Asset Id  Get"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/assets/prices/refresh": {
      "post": {
        "tags": [
          "FA (Financial Assets)",
          "FA Prices"
        ],
        "summary": "Refresh Prices Bulk",
        "description": "Bulk refresh prices via providers (PRIMARY bulk endpoint).",
        "operationId": "refresh_prices_bulk_api_v1_assets_prices_refresh_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "items": {
                  "$ref": "#/components/schemas/FARefreshItem"
                },
                "type": "array",
                "title": "Requests"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/FABulkRefreshResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/assets/provider": {
      "get": {
        "tags": [
          "FA (Financial Assets)",
          "FA Provider"
        ],
        "summary": "List Providers",
        "description": "List all available asset pricing providers.",
        "operationId": "list_providers_api_v1_assets_provider_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/FAProviderInfo"
                  },
                  "title": "Response List Providers Api V1 Assets Provider Get"
                }
              }
            }
          }
        }
      },
      "post": {
        "tags": [
          "FA (Financial Assets)",
          "FA Provider"
        ],
        "summary": "Assign Providers Bulk",
        "description": "Bulk assign providers to assets (PRIMARY bulk endpoint).",
        "operationId": "assign_providers_bulk_api_v1_assets_provider_post",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "array",
                "items": {
                  "$ref": "#/components/schemas/FAProviderAssignmentItem"
                },
                "title": "Assignments"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/FABulkAssignResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "delete": {
        "tags": [
          "FA (Financial Assets)",
          "FA Provider"
        ],
        "summary": "Remove Providers Bulk",
        "description": "Bulk remove provider assignments (PRIMARY bulk endpoint).",
        "operationId": "remove_providers_bulk_api_v1_assets_provider_delete",
        "parameters": [
          {
            "name": "asset_ids",
            "in": "query",
            "required": true,
            "schema": {
              "type": "array",
              "items": {
                "type": "integer"
              },
              "description": "List of asset IDs to remove providers from",
              "title": "Asset Ids"
            },
            "description": "List of asset IDs to remove providers from"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/FABulkRemoveResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/assets/provider/search": {
      "get": {
        "tags": [
          "FA (Financial Assets)",
          "FA Provider"
        ],
        "summary": "Search Assets Via Providers",
        "description": "Search for assets across one or more providers in parallel.\n\nQueries the specified providers (or all providers that support search) and\nreturns aggregated results. Searches are executed in parallel using asyncio.gather\nfor optimal performance.\n\n**Query Parameters**:\n- `q`: Search query (required, min 1 character)\n- `providers`: Comma-separated provider codes to query (optional, default: all with search support)\n\n**Example Requests**:\n```\nGET /api/v1/assets/provider/search?q=Apple\nGET /api/v1/assets/provider/search?q=MSCI+World&providers=justetf\nGET /api/v1/assets/provider/search?q=AAPL&providers=yfinance,justetf\n```\n\n**Response**:\n```json\n{\n  \"query\": \"Apple\",\n  \"total_results\": 5,\n  \"results\": [\n    {\n      \"identifier\": \"AAPL\",\n      \"display_name\": \"Apple Inc.\",\n      \"provider_code\": \"yfinance\",\n      \"currency\": \"USD\",\n      \"asset_type\": \"stock\"\n    }\n  ],\n  \"providers_queried\": [\"yfinance\", \"justetf\"],\n  \"providers_with_errors\": []\n}\n```\n\n**Notes**:\n- Searches are executed in parallel across all providers\n- Providers that don't support search are skipped (no error)\n- Provider-specific errors are logged but don't fail the entire request\n- Results are not deduplicated (same asset may appear from multiple providers)",
        "operationId": "search_assets_via_providers_api_v1_assets_provider_search_get",
        "parameters": [
          {
            "name": "q",
            "in": "query",
            "required": true,
            "schema": {
              "type": "string",
              "minLength": 1,
              "description": "Search query",
              "title": "Q"
            },
            "description": "Search query"
          },
          {
            "name": "providers",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Comma-separated provider codes (default: all)",
              "title": "Providers"
            },
            "description": "Comma-separated provider codes (default: all)"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/FAProviderSearchResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/assets/provider/assignments": {
      "get": {
        "tags": [
          "FA (Financial Assets)",
          "FA Provider"
        ],
        "summary": "Get Provider Assignments",
        "description": "Get provider assignments for multiple assets.\n\nReturns identifier, identifier_type, and provider_params for each assigned asset.\n\n**Example**:\n```\nGET /api/v1/assets/provider/assignments?asset_ids=1&asset_ids=2&asset_ids=3\n```\n\n**Response**:\n```json\n[\n  {\n    \"asset_id\": 1,\n    \"provider_code\": \"yfinance\",\n    \"identifier\": \"AAPL\",\n    \"identifier_type\": \"TICKER\",\n    \"provider_params\": {},\n    \"fetch_interval\": 1440,\n    \"last_fetch_at\": \"2025-01-15T10:30:00Z\"\n  }\n]\n```",
        "operationId": "get_provider_assignments_api_v1_assets_provider_assignments_get",
        "parameters": [
          {
            "name": "asset_ids",
            "in": "query",
            "required": true,
            "schema": {
              "type": "array",
              "items": {
                "type": "integer"
              },
              "description": "List of asset IDs",
              "title": "Asset Ids"
            },
            "description": "List of asset IDs"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/FAProviderAssignmentReadItem"
                  },
                  "title": "Response Get Provider Assignments Api V1 Assets Provider Assignments Get"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/assets/provider/refresh": {
      "post": {
        "tags": [
          "FA (Financial Assets)",
          "FA Provider",
          "FA Provider"
        ],
        "summary": "Refresh Assets From Provider",
        "description": "Refresh asset data from assigned providers (bulk operation).\n\n**EXPLICIT REFRESH** - No auto-refresh during provider assignment.\n\nFetches latest metadata from provider and updates:\n- asset_type (if provider supports)\n- classification_params (sector, short_description, geographic_area)\n\n**Field-level response**:\n- refreshed_fields: Successfully updated from provider\n- missing_data_fields: Provider couldn't fetch (no data available)\n- ignored_fields: Provider doesn't support these fields\n\n**Example Request**:\n```\nPOST /api/v1/assets/provider/refresh\n{\n  \"asset_ids\": [1, 2, 3]\n}\n```\n\n**Example Response**:\n```json\n{\n  \"results\": [\n    {\n      \"asset_id\": 1,\n      \"success\": true,\n      \"message\": \"Refreshed from yfinance\",\n      \"fields_detail\": {\n        \"refreshed_fields\": [\"asset_type\", \"sector\", \"short_description\"],\n        \"missing_data_fields\": [\"geographic_area\"],\n        \"ignored_fields\": []\n      }\n    }\n  ],\n  \"success_count\": 1,\n  \"failed_count\": 0\n}\n```\n\n**Per-Item Outcomes**:\n- success=true: Metadata refreshed (may have 0 changes)\n- success=false: No provider, provider doesn't support metadata, or error\n\nArgs:\n    asset_ids: List of asset IDs to refresh\n    session: Database session\n\nReturns:\n    FABulkMetadataRefreshResponse with per-item results and field-level details\n\nRaises:\n    HTTPException: 500 if unexpected error occurs",
        "operationId": "refresh_assets_from_provider_api_v1_assets_provider_refresh_post",
        "parameters": [
          {
            "name": "asset_ids",
            "in": "query",
            "required": true,
            "schema": {
              "type": "array",
              "items": {
                "type": "integer"
              },
              "description": "List of asset IDs to refresh metadata for",
              "title": "Asset Ids"
            },
            "description": "List of asset IDs to refresh metadata for"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/FABulkMetadataRefreshResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/transactions": {
      "post": {
        "tags": [
          "TX (Transactions)"
        ],
        "summary": "Create Transactions",
        "description": "Create multiple transactions.\n\nFor linked transactions (TRANSFER, FX_CONVERSION), use the same\nlink_uuid for both transactions in the request.\n\nArgs:\n    items: List of transactions to create\n\nReturns:\n    TXBulkCreateResponse with results for each item",
        "operationId": "create_transactions_api_v1_transactions_post",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "array",
                "items": {
                  "$ref": "#/components/schemas/TXCreateItem-Input"
                },
                "title": "Items"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/TXBulkCreateResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "get": {
        "tags": [
          "TX (Transactions)"
        ],
        "summary": "Query Transactions",
        "description": "Query transactions with filters.\n\nAll filters are optional. Results ordered by date desc, id desc.\n\nArgs:\n    broker_id: Filter by broker\n    asset_id: Filter by asset\n    types: Filter by transaction types\n    date_start: Filter by start date (inclusive)\n    date_end: Filter by end date (inclusive)\n    tags: Filter by tags (any match)\n    currency: Filter by currency code\n    limit: Max results (default 100, max 1000)\n    offset: Offset for pagination (first index to of list return (use if limit is low then the total size of the assets, to move the show window)\n\nReturns:\n    List of matching transactions",
        "operationId": "query_transactions_api_v1_transactions_get",
        "parameters": [
          {
            "name": "broker_id",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "integer",
                  "exclusiveMinimum": 0
                },
                {
                  "type": "null"
                }
              ],
              "description": "Filter by broker",
              "title": "Broker Id"
            },
            "description": "Filter by broker"
          },
          {
            "name": "asset_id",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "integer",
                  "exclusiveMinimum": 0
                },
                {
                  "type": "null"
                }
              ],
              "description": "Filter by asset",
              "title": "Asset Id"
            },
            "description": "Filter by asset"
          },
          {
            "name": "types",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/TransactionType"
                  }
                },
                {
                  "type": "null"
                }
              ],
              "description": "Filter by types",
              "title": "Types"
            },
            "description": "Filter by types"
          },
          {
            "name": "date_start",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Start date (YYYY-MM-DD)",
              "title": "Date Start"
            },
            "description": "Start date (YYYY-MM-DD)"
          },
          {
            "name": "date_end",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "End date (YYYY-MM-DD)",
              "title": "Date End"
            },
            "description": "End date (YYYY-MM-DD)"
          },
          {
            "name": "tags",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "array",
                  "items": {
                    "type": "string"
                  }
                },
                {
                  "type": "null"
                }
              ],
              "description": "Filter by tags",
              "title": "Tags"
            },
            "description": "Filter by tags"
          },
          {
            "name": "currency",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string",
                  "maxLength": 3
                },
                {
                  "type": "null"
                }
              ],
              "description": "Filter by currency",
              "title": "Currency"
            },
            "description": "Filter by currency"
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 1000,
              "minimum": 1,
              "description": "Max results",
              "default": 100,
              "title": "Limit"
            },
            "description": "Max results"
          },
          {
            "name": "offset",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "minimum": 0,
              "description": "Offset for pagination",
              "default": 0,
              "title": "Offset"
            },
            "description": "Offset for pagination"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/TXReadItem"
                  },
                  "title": "Response Query Transactions Api V1 Transactions Get"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "patch": {
        "tags": [
          "TX (Transactions)"
        ],
        "summary": "Update Transactions",
        "description": "Update multiple transactions.\n\nOnly provided fields will be updated.\nType cannot be changed. related_transaction_id cannot be updated directly.\n\nArgs:\n    items: List of updates (each must include id)\n\nReturns:\n    TXBulkUpdateResponse with results for each item",
        "operationId": "update_transactions_api_v1_transactions_patch",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "array",
                "items": {
                  "$ref": "#/components/schemas/TXUpdateItem"
                },
                "title": "Items"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/TXBulkUpdateResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "delete": {
        "tags": [
          "TX (Transactions)"
        ],
        "summary": "Delete Transactions",
        "description": "Delete multiple transactions.\n\nFor linked transactions, both must be included in the delete request.\nValidates balances after deletion.\n\nArgs:\n    ids: List of transaction IDs to delete\n\nReturns:\n    TXBulkDeleteResponse with results",
        "operationId": "delete_transactions_api_v1_transactions_delete",
        "parameters": [
          {
            "name": "ids",
            "in": "query",
            "required": true,
            "schema": {
              "type": "array",
              "items": {
                "type": "integer"
              },
              "description": "Transaction IDs to delete",
              "title": "Ids"
            },
            "description": "Transaction IDs to delete"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/TXBulkDeleteResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/transactions/types": {
      "get": {
        "tags": [
          "TX (Transactions)"
        ],
        "summary": "Get Transaction Types",
        "description": "Get metadata for all transaction types.\n\nReturns icons, descriptions, and validation rules for each type.\nFrontend uses this to validate user input and show correct UI.\n\nReturns:\n    List of transaction type metadata",
        "operationId": "get_transaction_types_api_v1_transactions_types_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "items": {
                    "$ref": "#/components/schemas/TXTypeMetadata"
                  },
                  "type": "array",
                  "title": "Response Get Transaction Types Api V1 Transactions Types Get"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/transactions/{tx_id}": {
      "get": {
        "tags": [
          "TX (Transactions)"
        ],
        "summary": "Get Transaction",
        "description": "Get a single transaction by ID.\n\nArgs:\n    tx_id: Transaction ID\n\nReturns:\n    Transaction details\n\nRaises:\n    HTTPException 404: If transaction not found",
        "operationId": "get_transaction_api_v1_transactions__tx_id__get",
        "parameters": [
          {
            "name": "tx_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "title": "Tx Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/TXReadItem"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/brokers": {
      "post": {
        "tags": [
          "BR (Broker)"
        ],
        "summary": "Create Brokers",
        "description": "Create multiple brokers.\n\nIf initial_balances is provided, automatically creates DEPOSIT\ntransactions for each currency.\n\nArgs:\n    items: List of brokers to create\n\nReturns:\n    BRBulkCreateResponse with results for each item",
        "operationId": "create_brokers_api_v1_brokers_post",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "array",
                "items": {
                  "$ref": "#/components/schemas/BRCreateItem"
                },
                "title": "Items"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/BRBulkCreateResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "get": {
        "tags": [
          "BR (Broker)"
        ],
        "summary": "List Brokers",
        "description": "List all brokers.\n\nReturns basic broker information without balances.\nUse GET /brokers/{id}/summary for full details.\n\nReturns:\n    List of brokers ordered by name",
        "operationId": "list_brokers_api_v1_brokers_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/BRReadItem"
                  },
                  "title": "Response List Brokers Api V1 Brokers Get"
                }
              }
            }
          }
        }
      },
      "delete": {
        "tags": [
          "BR (Broker)"
        ],
        "summary": "Delete Brokers",
        "description": "Delete multiple brokers.\n\nIf force=False (default), fails if broker has any transactions.\nIf force=True, cascade deletes all transactions.\n\nArgs:\n    ids: List of broker IDs to delete\n    force: If True, delete broker even if it has transactions\n\nReturns:\n    BRBulkDeleteResponse with results",
        "operationId": "delete_brokers_api_v1_brokers_delete",
        "parameters": [
          {
            "name": "ids",
            "in": "query",
            "required": true,
            "schema": {
              "type": "array",
              "items": {
                "type": "integer"
              },
              "description": "Broker IDs to delete",
              "title": "Ids"
            },
            "description": "Broker IDs to delete"
          },
          {
            "name": "force",
            "in": "query",
            "required": false,
            "schema": {
              "type": "boolean",
              "description": "Force delete with transactions",
              "default": false,
              "title": "Force"
            },
            "description": "Force delete with transactions"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/BRBulkDeleteResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/brokers/{broker_id}": {
      "get": {
        "tags": [
          "BR (Broker)"
        ],
        "summary": "Get Broker",
        "description": "Get a single broker by ID.\n\nReturns basic broker information without balances.\nUse GET /brokers/{id}/summary for full details.\n\nArgs:\n    broker_id: Broker ID\n\nReturns:\n    Broker details\n\nRaises:\n    HTTPException 404: If broker not found",
        "operationId": "get_broker_api_v1_brokers__broker_id__get",
        "parameters": [
          {
            "name": "broker_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "title": "Broker Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/BRReadItem"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "patch": {
        "tags": [
          "BR (Broker)"
        ],
        "summary": "Update Broker",
        "description": "Update a broker.\n\nOnly provided fields will be updated.\n\nIf disabling overdraft/shorting flags, validates that current\nbalances don't violate the new constraints.\n\nArgs:\n    broker_id: Broker ID to update\n    item: Update data\n\nReturns:\n    BRBulkUpdateResponse with result",
        "operationId": "update_broker_api_v1_brokers__broker_id__patch",
        "parameters": [
          {
            "name": "broker_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "title": "Broker Id"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/BRUpdateItem"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/BRBulkUpdateResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/brokers/{broker_id}/summary": {
      "get": {
        "tags": [
          "BR (Broker)"
        ],
        "summary": "Get Broker Summary",
        "description": "Get broker with full summary.\n\nIncludes:\n- Basic broker info\n- Cash balances per currency\n- Asset holdings with cost basis and market value\n\nArgs:\n    broker_id: Broker ID\n\nReturns:\n    BRSummary with full details\n\nRaises:\n    HTTPException 404: If broker not found",
        "operationId": "get_broker_summary_api_v1_brokers__broker_id__summary_get",
        "parameters": [
          {
            "name": "broker_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "title": "Broker Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/BRSummary"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/brokers/import/upload": {
      "post": {
        "tags": [
          "BR (Broker)",
          "BR Import"
        ],
        "summary": "Upload File",
        "description": "Upload a broker report file for future processing.\n\nThe file is saved with a UUID-based name. Compatible plugins are\nauto-detected based on file extension and content.\n\nReturns file metadata including compatible plugins.",
        "operationId": "upload_file_api_v1_brokers_import_upload_post",
        "requestBody": {
          "content": {
            "multipart/form-data": {
              "schema": {
                "$ref": "#/components/schemas/Body_upload_file_api_v1_brokers_import_upload_post"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/BRIMFileInfo"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/brokers/import/files": {
      "get": {
        "tags": [
          "BR (Broker)",
          "BR Import"
        ],
        "summary": "List Files",
        "description": "List all uploaded broker report files.\n\nOptionally filter by status. Results are sorted by upload time (newest first).",
        "operationId": "list_files_api_v1_brokers_import_files_get",
        "parameters": [
          {
            "name": "status",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "$ref": "#/components/schemas/BRIMFileStatus"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Filter by status: uploaded, imported, failed",
              "title": "Status"
            },
            "description": "Filter by status: uploaded, imported, failed"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/BRIMFileInfo"
                  },
                  "title": "Response List Files Api V1 Brokers Import Files Get"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/brokers/import/files/{file_id}": {
      "get": {
        "tags": [
          "BR (Broker)",
          "BR Import"
        ],
        "summary": "Get File",
        "description": "Get details for a specific file.",
        "operationId": "get_file_api_v1_brokers_import_files__file_id__get",
        "parameters": [
          {
            "name": "file_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "File Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/BRIMFileInfo"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "delete": {
        "tags": [
          "BR (Broker)",
          "BR Import"
        ],
        "summary": "Delete File",
        "description": "Delete a file and its metadata.",
        "operationId": "delete_file_api_v1_brokers_import_files__file_id__delete",
        "parameters": [
          {
            "name": "file_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "File Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "additionalProperties": true,
                  "title": "Response Delete File Api V1 Brokers Import Files  File Id  Delete"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/brokers/import/files/{file_id}/parse": {
      "post": {
        "tags": [
          "BR (Broker)",
          "BR Import"
        ],
        "summary": "Parse File",
        "description": "Parse a file and return transactions for preview.\n\nThis is a preview operation - no data is persisted to the database.\nThe user can review and modify the parsed transactions before\nsending them to POST /transactions endpoint.\n\nIf plugin_code is 'auto' (default), the system will automatically\ndetect the best plugin based on file content analysis.\n\nReturns:\n- transactions: Parsed transactions (may have fake asset IDs)\n- asset_mappings: Mapping from fake IDs to candidate real assets\n- duplicates: Report of potential duplicate transactions\n- warnings: Parser warnings (skipped rows, etc.)\n\nNote: Asset mapping and duplicate detection are done in CORE,\nnot in the plugin. Plugins only parse the file format.",
        "operationId": "parse_file_api_v1_brokers_import_files__file_id__parse_post",
        "parameters": [
          {
            "name": "file_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "File Id"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/BRIMParseRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/BRIMParseResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/brokers/import/plugins": {
      "get": {
        "tags": [
          "BR (Broker)",
          "BR Import"
        ],
        "summary": "List Plugins",
        "description": "List all available import plugins.\n\nReturns plugin metadata including code, name, description,\nand supported file extensions.",
        "operationId": "list_plugins_api_v1_brokers_import_plugins_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "items": {
                    "$ref": "#/components/schemas/BRIMPluginInfo"
                  },
                  "type": "array",
                  "title": "Response List Plugins Api V1 Brokers Import Plugins Get"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/backup/export": {
      "post": {
        "tags": [
          "Backup & Export"
        ],
        "summary": "Export Data",
        "description": "Export portfolio data to file.\n\n**Supported Formats:**\n- `json`: Human-readable JSON file\n- `csv`: Multiple CSV files in ZIP archive\n- `sqlite`: Full SQLite database file\n\n**Scope Options:**\n- `all`: Export everything\n- `transactions`: Only transactions\n- `assets`: Only assets and metadata\n- `brokers`: Only broker definitions\n- `settings`: Only user settings\n\n**Note:** This endpoint is not yet implemented.",
        "operationId": "export_data_api_v1_backup_export_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ExportRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ExportResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/backup/restore": {
      "post": {
        "tags": [
          "Backup & Export"
        ],
        "summary": "Restore Data",
        "description": "Restore portfolio data from backup file.\n\n**Important:**\n- If `overwrite_existing=False` (default), only imports new data\n- If `overwrite_existing=True`, replaces all existing data\n\n**Supported Formats:**\n- JSON export files created by `/export`\n- SQLite database files\n\n**Note:** This endpoint is not yet implemented.",
        "operationId": "restore_data_api_v1_backup_restore_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/RestoreRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/RestoreResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/backup/formats": {
      "get": {
        "tags": [
          "Backup & Export"
        ],
        "summary": "List Export Formats",
        "description": "List available export formats.\n\nReturns information about each supported format.",
        "operationId": "list_export_formats_api_v1_backup_formats_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          }
        }
      }
    },
    "/api/v1/backup/status": {
      "get": {
        "tags": [
          "Backup & Export"
        ],
        "summary": "Backup Status",
        "description": "Get backup/export system status.\n\nReturns current implementation status.",
        "operationId": "backup_status_api_v1_backup_status_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          }
        }
      }
    },
    "/api/v1/utilities/countries/normalize": {
      "get": {
        "tags": [
          "Utilities"
        ],
        "summary": "Normalize Country",
        "description": "Normalize country name/code to ISO-3166-A3 format.\n\nAccepts:\n- ISO-3166-A3 codes (e.g., USA, GBR)\n- ISO-3166-A2 codes (e.g., US, GB)\n- Country names (e.g., \"United States\", \"Italy\")\n- Regions (e.g., \"EUR\", \"ASIA\") - returns list of countries\n\n**Example Requests**:\n```\nGET /api/v1/utilities/countries/normalize?name=USA\nGET /api/v1/utilities/countries/normalize?name=Italy\nGET /api/v1/utilities/countries/normalize?name=EUR\n```\n\n**Response**:\n```json\n{\n  \"query\": \"Italy\",\n  \"iso3_codes\": [\"ITA\"],\n  \"match_type\": \"exact\"\n}\n```\n\nFor regions like EUR, ASIA, G7, returns multiple countries:\n```json\n{\n  \"query\": \"G7\",\n  \"iso3_codes\": [\"USA\", \"CAN\", \"GBR\", \"DEU\", \"FRA\", \"ITA\", \"JPN\"],\n  \"match_type\": \"region\"\n}\n```",
        "operationId": "normalize_country_api_v1_utilities_countries_normalize_get",
        "parameters": [
          {
            "name": "name",
            "in": "query",
            "required": true,
            "schema": {
              "type": "string",
              "minLength": 1,
              "description": "Country name or code to normalize",
              "title": "Name"
            },
            "description": "Country name or code to normalize"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CountryNormalizationResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/utilities/sectors": {
      "get": {
        "tags": [
          "Utilities"
        ],
        "summary": "List Sectors",
        "description": "Get list of all standard financial sectors.\n\nReturns the list of sectors that the system recognizes and stores.\nBased on GICS (Global Industry Classification Standard).\n\n**Example Request**:\n```\nGET /api/v1/utilities/sectors\nGET /api/v1/utilities/sectors?include_other=false\n```\n\n**Response**:\n```json\n{\n  \"sectors\": [\n    \"Industrials\",\n    \"Technology\",\n    \"Financials\",\n    \"Consumer Discretionary\",\n    \"Health Care\",\n    \"Real Estate\",\n    \"Basic Materials\",\n    \"Energy\",\n    \"Consumer Staples\",\n    \"Telecommunication\",\n    \"Utilities\",\n    \"Other\"\n  ],\n  \"count\": 12\n}\n```",
        "operationId": "list_sectors_api_v1_utilities_sectors_get",
        "parameters": [
          {
            "name": "include_other",
            "in": "query",
            "required": false,
            "schema": {
              "type": "boolean",
              "description": "Include 'Other' in the list",
              "default": true,
              "title": "Include Other"
            },
            "description": "Include 'Other' in the list"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SectorListResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/utilities/countries": {
      "get": {
        "tags": [
          "Utilities"
        ],
        "summary": "List Countries",
        "description": "Get list of all countries with ISO codes and flag emoji.\n\nReturns all ISO-3166 countries with:\n- ISO-3166-A3 code (e.g., USA)\n- ISO-3166-A2 code (e.g., US)\n- Country name in requested language (via Babel)\n- Flag emoji (e.g., \ud83c\uddfa\ud83c\uddf8)\n\n**Supported Languages**:\n- en (English) - default\n- it (Italian)\n- fr (French)\n- es (Spanish)\n- Other languages supported by Babel\n- Falls back to English if language not supported\n\n**Example Request**:\n```\nGET /api/v1/utilities/countries\nGET /api/v1/utilities/countries?language=it\n```\n\n**Response**:\n```json\n{\n  \"countries\": [\n    {\"iso3\": \"USA\", \"iso2\": \"US\", \"name\": \"Stati Uniti\", \"flag_emoji\": \"\ud83c\uddfa\ud83c\uddf8\"},\n    {\"iso3\": \"ITA\", \"iso2\": \"IT\", \"name\": \"Italia\", \"flag_emoji\": \"\ud83c\uddee\ud83c\uddf9\"},\n    ...\n  ],\n  \"count\": 249,\n  \"language\": \"it\"\n}\n```",
        "operationId": "list_countries_api_v1_utilities_countries_get",
        "parameters": [
          {
            "name": "language",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "description": "Language for country names (default: en)",
              "default": "en",
              "title": "Language"
            },
            "description": "Language for country names (default: en)"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CountryListResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/utilities/currencies": {
      "get": {
        "tags": [
          "Utilities"
        ],
        "summary": "List Currencies",
        "description": "Get list of all currencies with ISO codes, names, and symbols.\n\nReturns all ISO 4217 currencies with:\n- ISO 4217 code (e.g., USD, EUR)\n- Currency name in requested language (via Babel)\n- Currency symbol (e.g., $, \u20ac)\n\n**Supported Languages**:\n- en (English) - default\n- it (Italian)\n- fr (French)\n- es (Spanish)\n- Other languages supported by Babel\n- Falls back to English if language not supported\n\n**Example Request**:\n```\nGET /api/v1/utilities/currencies\nGET /api/v1/utilities/currencies?language=it\n```\n\n**Response**:\n```json\n{\n  \"currencies\": [\n    {\"code\": \"USD\", \"name\": \"Dollaro statunitense\", \"symbol\": \"$\"},\n    {\"code\": \"EUR\", \"name\": \"Euro\", \"symbol\": \"\u20ac\"},\n    ...\n  ],\n  \"count\": 182,\n  \"language\": \"it\"\n}\n```",
        "operationId": "list_currencies_api_v1_utilities_currencies_get",
        "parameters": [
          {
            "name": "language",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "description": "Language for currency names (default: en)",
              "default": "en",
              "title": "Language"
            },
            "description": "Language for currency names (default: en)"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CurrencyListResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/utilities/currencies/normalize": {
      "get": {
        "tags": [
          "Utilities"
        ],
        "summary": "Normalize Currency Endpoint",
        "description": "Normalize currency name/code/symbol to ISO 4217 format.\n\nAccepts:\n- ISO 4217 codes (e.g., USD, EUR)\n- Currency symbols (e.g., $, \u20ac, \u00a3)\n- Currency names in requested language (e.g., \"Dollar\", \"Euro\")\n\n**Example Requests**:\n```\nGET /api/v1/utilities/currencies/normalize?name=USD\nGET /api/v1/utilities/currencies/normalize?name=$\nGET /api/v1/utilities/currencies/normalize?name=Dollar&language=en\n```\n\n**Response for exact match**:\n```json\n{\n  \"query\": \"EUR\",\n  \"iso_codes\": [\"EUR\"],\n  \"match_type\": \"exact\",\n  \"error\": null\n}\n```\n\n**Response for ambiguous symbol**:\n```json\n{\n  \"query\": \"$\",\n  \"iso_codes\": [\"USD\", \"CAD\", \"AUD\", \"NZD\", \"HKD\", \"SGD\", \"MXN\"],\n  \"match_type\": \"symbol_ambiguous\",\n  \"error\": \"Symbol '$' matches multiple currencies\"\n}\n```",
        "operationId": "normalize_currency_endpoint_api_v1_utilities_currencies_normalize_get",
        "parameters": [
          {
            "name": "name",
            "in": "query",
            "required": true,
            "schema": {
              "type": "string",
              "minLength": 1,
              "description": "Currency code, symbol, or name to normalize",
              "title": "Name"
            },
            "description": "Currency code, symbol, or name to normalize"
          },
          {
            "name": "language",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "description": "Language for name matching (default: en)",
              "default": "en",
              "title": "Language"
            },
            "description": "Language for name matching (default: en)"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CurrencyNormalizationResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/health": {
      "get": {
        "summary": "Health Check",
        "description": "Health check endpoint.\nReturns service status.\n\nReturns:\n    dict: Status message",
        "operationId": "health_check_api_v1_health_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          }
        }
      }
    },
    "/mkdocs": {
      "get": {
        "summary": "Mkdocs Root",
        "operationId": "mkdocs_root_mkdocs_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "text/html": {
                "schema": {
                  "type": "string"
                }
              }
            }
          }
        }
      }
    },
    "/mkdocs/{path}": {
      "get": {
        "summary": "Mkdocs Static",
        "operationId": "mkdocs_static_mkdocs__path__get",
        "parameters": [
          {
            "name": "path",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Path"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/": {
      "get": {
        "summary": "Root",
        "description": "Root endpoint.\nServes frontend if build exists, otherwise provides API information.",
        "operationId": "root__get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          }
        }
      }
    },
    "/{path}": {
      "get": {
        "summary": "Frontend Catchall",
        "description": "Serve frontend for any non-API route (SPA support).",
        "operationId": "frontend_catchall__path__get",
        "parameters": [
          {
            "name": "path",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Path"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    }
  },
  "components": {
    "schemas": {
      "AssetType": {
        "type": "string",
        "enum": [
          "STOCK",
          "ETF",
          "BOND",
          "CRYPTO",
          "FUND",
          "CROWDFUND_LOAN",
          "HOLD",
          "OTHER"
        ],
        "title": "AssetType",
        "description": "Asset type classification.\n\nUsage: Categorize assets by their nature for reporting and analysis.\n\n- STOCK: Individual company shares (e.g., Apple, Microsoft)\n- ETF: Exchange Traded Fund (e.g., VWCE, SPY)\n- BOND: Fixed income securities (government or corporate bonds)\n- CRYPTO: Cryptocurrencies (e.g., Bitcoin, Ethereum)\n- FUND: Mutual funds or investment funds\n- HOLD: Assets without automatic market pricing (real estate, art, collectibles, unlisted companies)\n- CROWDFUND_LOAN: Peer-to-peer lending or crowdfunding loans (e.g., Recrowd, Mintos)\n- OTHER: Any other asset type not listed above\n\nImpact:\n- Affects default valuation_model:\n  - CROWDFUND_LOAN -> SCHEDULED_YIELD\n  - HOLD -> MANUAL\n  - Others -> MARKET_PRICE\n- Used for portfolio breakdown and allocation analysis\n- May influence available data plugins (e.g., crypto uses different sources)"
      },
      "BRAssetHolding": {
        "properties": {
          "asset_id": {
            "type": "integer",
            "title": "Asset Id",
            "description": "Asset ID"
          },
          "asset_name": {
            "type": "string",
            "title": "Asset Name",
            "description": "Asset display name"
          },
          "quantity": {
            "type": "string",
            "pattern": "^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$",
            "title": "Quantity",
            "description": "Current quantity held"
          },
          "total_cost": {
            "$ref": "#/components/schemas/Currency-Output",
            "description": "Total amount spent to acquire (FIFO)"
          },
          "average_cost_per_unit": {
            "type": "string",
            "pattern": "^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$",
            "title": "Average Cost Per Unit",
            "description": "Average cost per unit"
          },
          "current_price": {
            "anyOf": [
              {
                "type": "string",
                "pattern": "^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$"
              },
              {
                "type": "null"
              }
            ],
            "title": "Current Price",
            "description": "Latest price per unit"
          },
          "current_value": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/Currency-Output"
              },
              {
                "type": "null"
              }
            ],
            "description": "Current market value"
          },
          "unrealized_pnl": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/Currency-Output"
              },
              {
                "type": "null"
              }
            ],
            "description": "Unrealized profit/loss"
          },
          "unrealized_pnl_percent": {
            "anyOf": [
              {
                "type": "string",
                "pattern": "^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$"
              },
              {
                "type": "null"
              }
            ],
            "title": "Unrealized Pnl Percent",
            "description": "Unrealized P&L %"
          }
        },
        "additionalProperties": false,
        "type": "object",
        "required": [
          "asset_id",
          "asset_name",
          "quantity",
          "total_cost",
          "average_cost_per_unit"
        ],
        "title": "BRAssetHolding",
        "description": "Single asset holding within a broker.\n\nRepresents current position in an asset with cost basis and market value."
      },
      "BRBulkCreateResponse": {
        "properties": {
          "results": {
            "items": {
              "$ref": "#/components/schemas/BRCreateResult"
            },
            "type": "array",
            "title": "Results",
            "description": "Per-item operation results"
          },
          "success_count": {
            "type": "integer",
            "minimum": 0.0,
            "title": "Success Count",
            "description": "Number of successful operations"
          },
          "errors": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Errors",
            "description": "Operation-level errors (not per-item)"
          }
        },
        "additionalProperties": false,
        "type": "object",
        "required": [
          "results",
          "success_count"
        ],
        "title": "BRBulkCreateResponse",
        "description": "Response for bulk broker creation."
      },
      "BRBulkDeleteResponse": {
        "properties": {
          "results": {
            "items": {
              "$ref": "#/components/schemas/BRDeleteResult"
            },
            "type": "array",
            "title": "Results",
            "description": "Per-item operation results"
          },
          "success_count": {
            "type": "integer",
            "minimum": 0.0,
            "title": "Success Count",
            "description": "Number of successful operations"
          },
          "errors": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Errors",
            "description": "Operation-level errors (not per-item)"
          },
          "total_deleted": {
            "type": "integer",
            "minimum": 0.0,
            "title": "Total Deleted",
            "description": "Total number of records deleted across all items"
          }
        },
        "additionalProperties": false,
        "type": "object",
        "required": [
          "results",
          "success_count",
          "total_deleted"
        ],
        "title": "BRBulkDeleteResponse",
        "description": "Response for bulk broker deletion."
      },
      "BRBulkUpdateResponse": {
        "properties": {
          "results": {
            "items": {
              "$ref": "#/components/schemas/BRUpdateResult"
            },
            "type": "array",
            "title": "Results",
            "description": "Per-item operation results"
          },
          "success_count": {
            "type": "integer",
            "minimum": 0.0,
            "title": "Success Count",
            "description": "Number of successful operations"
          },
          "errors": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Errors",
            "description": "Operation-level errors (not per-item)"
          }
        },
        "additionalProperties": false,
        "type": "object",
        "required": [
          "results",
          "success_count"
        ],
        "title": "BRBulkUpdateResponse",
        "description": "Response for bulk broker update."
      },
      "BRCreateItem": {
        "properties": {
          "name": {
            "type": "string",
            "maxLength": 100,
            "minLength": 1,
            "title": "Name",
            "description": "Broker name (must be unique)"
          },
          "description": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 500
              },
              {
                "type": "null"
              }
            ],
            "title": "Description",
            "description": "Broker description"
          },
          "portal_url": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 255
              },
              {
                "type": "null"
              }
            ],
            "title": "Portal Url",
            "description": "URL to broker's web portal"
          },
          "allow_cash_overdraft": {
            "type": "boolean",
            "title": "Allow Cash Overdraft",
            "description": "Allow negative cash balance (margin trading)",
            "default": false
          },
          "allow_asset_shorting": {
            "type": "boolean",
            "title": "Allow Asset Shorting",
            "description": "Allow negative asset quantities (short selling)",
            "default": false
          },
          "initial_balances": {
            "anyOf": [
              {
                "items": {
                  "$ref": "#/components/schemas/Currency-Input"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Initial Balances",
            "description": "Initial cash balances. Creates DEPOSIT transactions."
          }
        },
        "additionalProperties": false,
        "type": "object",
        "required": [
          "name"
        ],
        "title": "BRCreateItem",
        "description": "DTO for creating a new broker.\n\nUsed by POST /api/v1/brokers endpoint.\n\ninitial_balances: Optional list of Currency objects.\nCreates automatic DEPOSIT transactions for each.\nExample: [Currency(code=\"EUR\", amount=10000), Currency(code=\"USD\", amount=5000)]"
      },
      "BRCreateResult": {
        "properties": {
          "success": {
            "type": "boolean",
            "title": "Success"
          },
          "broker_id": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Broker Id"
          },
          "name": {
            "type": "string",
            "title": "Name"
          },
          "deposits_created": {
            "type": "integer",
            "minimum": 0.0,
            "title": "Deposits Created",
            "description": "Number of DEPOSIT transactions created",
            "default": 0
          },
          "error": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Error"
          }
        },
        "additionalProperties": false,
        "type": "object",
        "required": [
          "success",
          "name"
        ],
        "title": "BRCreateResult",
        "description": "Result for a single broker creation attempt."
      },
      "BRDeleteResult": {
        "properties": {
          "success": {
            "type": "boolean",
            "title": "Success",
            "description": "Whether the deletion succeeded"
          },
          "deleted_count": {
            "type": "integer",
            "minimum": 0.0,
            "title": "Deleted Count",
            "description": "Number of items deleted"
          },
          "message": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Message",
            "description": "Info/warning/error message"
          },
          "id": {
            "type": "integer",
            "title": "Id",
            "description": "Broker ID"
          },
          "transactions_deleted": {
            "type": "integer",
            "minimum": 0.0,
            "title": "Transactions Deleted",
            "description": "Number of transactions cascade-deleted (only when force=True)",
            "default": 0
          }
        },
        "additionalProperties": false,
        "type": "object",
        "required": [
          "success",
          "deleted_count",
          "id"
        ],
        "title": "BRDeleteResult",
        "description": "Result for a single broker deletion attempt.\n\nExtends BaseDeleteResult with broker-specific fields.\n- transactions_deleted: Count of transactions removed (only >0 when force=True was used)"
      },
      "BRIMAssetCandidate": {
        "properties": {
          "asset_id": {
            "type": "integer",
            "title": "Asset Id",
            "description": "Real asset ID from database"
          },
          "symbol": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Symbol",
            "description": "Asset symbol/ticker"
          },
          "isin": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Isin",
            "description": "Asset ISIN"
          },
          "name": {
            "type": "string",
            "title": "Name",
            "description": "Asset display name"
          },
          "match_confidence": {
            "$ref": "#/components/schemas/BRIMMatchConfidence",
            "description": "How confident we are this is the right asset"
          }
        },
        "type": "object",
        "required": [
          "asset_id",
          "name",
          "match_confidence"
        ],
        "title": "BRIMAssetCandidate",
        "description": "A potential real asset match for a fake asset ID.\n\nFound by searching the database using extracted info from the import file."
      },
      "BRIMAssetMapping": {
        "properties": {
          "fake_asset_id": {
            "type": "integer",
            "title": "Fake Asset Id",
            "description": "Fake ID used in parsed transactions"
          },
          "extracted_symbol": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Extracted Symbol",
            "description": "Symbol extracted from file"
          },
          "extracted_isin": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Extracted Isin",
            "description": "ISIN extracted from file"
          },
          "extracted_name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Extracted Name",
            "description": "Name extracted from file"
          },
          "candidates": {
            "items": {
              "$ref": "#/components/schemas/BRIMAssetCandidate"
            },
            "type": "array",
            "title": "Candidates",
            "description": "Possible asset matches from database (empty = not found)"
          },
          "selected_asset_id": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Selected Asset Id",
            "description": "Auto-set if 1 candidate, else None (user must choose)"
          }
        },
        "type": "object",
        "required": [
          "fake_asset_id"
        ],
        "title": "BRIMAssetMapping",
        "description": "Mapping from a fake asset ID to extracted info and candidate matches.\n\nThe parser assigns fake IDs to assets it finds in the import file.\nThis mapping tells the user what was extracted and suggests real assets.\n\nNote: selected_asset_id is auto-populated if exactly 1 candidate found.\nFrontend can override or must set if candidates is empty or multiple."
      },
      "BRIMDuplicateLevel": {
        "type": "string",
        "enum": [
          "possible",
          "possible_with_asset",
          "likely",
          "likely_with_asset"
        ],
        "title": "BRIMDuplicateLevel",
        "description": "Confidence level for duplicate detection (ascending order).\n\nLevels (from lowest to highest confidence):\n1. POSSIBLE: type + date + quantity + cash match, but asset not resolved\n2. POSSIBLE_WITH_ASSET: POSSIBLE + asset auto-resolved (1 candidate)\n3. LIKELY: POSSIBLE + identical non-empty description, but asset not resolved\n4. LIKELY_WITH_ASSET: LIKELY + asset auto-resolved (practically certain duplicate)\n\nThe WITH_ASSET variants are more reliable because the asset was automatically\nmatched to a single candidate in the database."
      },
      "BRIMDuplicateMatch": {
        "properties": {
          "existing_tx_id": {
            "type": "integer",
            "title": "Existing Tx Id",
            "description": "ID of existing transaction in DB"
          },
          "tx_date": {
            "type": "string",
            "format": "date",
            "title": "Tx Date",
            "description": "Transaction date"
          },
          "tx_type": {
            "$ref": "#/components/schemas/TransactionType",
            "description": "Transaction type"
          },
          "tx_quantity": {
            "type": "string",
            "pattern": "^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$",
            "title": "Tx Quantity",
            "description": "Transaction quantity"
          },
          "tx_cash_amount": {
            "anyOf": [
              {
                "type": "string",
                "pattern": "^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$"
              },
              {
                "type": "null"
              }
            ],
            "title": "Tx Cash Amount",
            "description": "Cash amount if applicable"
          },
          "tx_cash_currency": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Tx Cash Currency",
            "description": "Cash currency if applicable"
          },
          "tx_description": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Tx Description",
            "description": "Transaction description"
          },
          "match_level": {
            "$ref": "#/components/schemas/BRIMDuplicateLevel",
            "description": "Duplicate confidence level"
          }
        },
        "type": "object",
        "required": [
          "existing_tx_id",
          "tx_date",
          "tx_type",
          "tx_quantity",
          "match_level"
        ],
        "title": "BRIMDuplicateMatch",
        "description": "An existing transaction in the database that may be a duplicate."
      },
      "BRIMDuplicateReport": {
        "properties": {
          "tx_unique_indices": {
            "items": {
              "type": "integer"
            },
            "type": "array",
            "title": "Tx Unique Indices",
            "description": "Row indices of unique (non-duplicate) transactions"
          },
          "tx_possible_duplicates": {
            "items": {
              "$ref": "#/components/schemas/BRIMTXDuplicateCandidate"
            },
            "type": "array",
            "title": "Tx Possible Duplicates",
            "description": "Transactions that might be duplicates (POSSIBLE level)"
          },
          "tx_likely_duplicates": {
            "items": {
              "$ref": "#/components/schemas/BRIMTXDuplicateCandidate"
            },
            "type": "array",
            "title": "Tx Likely Duplicates",
            "description": "Transactions very likely to be duplicates (LIKELY level)"
          }
        },
        "type": "object",
        "title": "BRIMDuplicateReport",
        "description": "Report of duplicate detection results for all parsed transactions.\n\nTransactions are categorized into:\n- tx_unique_indices: Definitely new (no matches found)\n- tx_possible_duplicates: Might be duplicates (key fields match, no description match)\n- tx_likely_duplicates: Very likely duplicates (key fields + description match)"
      },
      "BRIMFileInfo": {
        "properties": {
          "file_id": {
            "type": "string",
            "title": "File Id",
            "description": "UUID identifier for the file"
          },
          "filename": {
            "type": "string",
            "title": "Filename",
            "description": "Original filename from upload"
          },
          "size_bytes": {
            "type": "integer",
            "minimum": 0.0,
            "title": "Size Bytes",
            "description": "File size in bytes"
          },
          "status": {
            "$ref": "#/components/schemas/BRIMFileStatus",
            "description": "Current processing status"
          },
          "uploaded_at": {
            "type": "string",
            "format": "date-time",
            "title": "Uploaded At",
            "description": "UTC timestamp when uploaded"
          },
          "processed_at": {
            "anyOf": [
              {
                "type": "string",
                "format": "date-time"
              },
              {
                "type": "null"
              }
            ],
            "title": "Processed At",
            "description": "UTC timestamp when processed"
          },
          "compatible_plugins": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Compatible Plugins",
            "description": "Plugin codes that can parse this file"
          },
          "error_message": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Error Message",
            "description": "Error description if processing failed"
          }
        },
        "type": "object",
        "required": [
          "file_id",
          "filename",
          "size_bytes",
          "status",
          "uploaded_at"
        ],
        "title": "BRIMFileInfo",
        "description": "Information about an uploaded broker report file.\n\nAttributes:\n    file_id: UUID identifier (NOT filesystem path)\n    filename: Original filename from upload\n    size_bytes: File size in bytes\n    status: Current processing status\n    uploaded_at: UTC timestamp when file was uploaded\n    processed_at: UTC timestamp when file was processed (if applicable)\n    compatible_plugins: List of plugin codes that can parse this file\n    error_message: Error description if status is FAILED"
      },
      "BRIMFileStatus": {
        "type": "string",
        "enum": [
          "uploaded",
          "parsed",
          "failed"
        ],
        "title": "BRIMFileStatus",
        "description": "Status of an uploaded broker report file.\n\nFlow: UPLOADED \u2192 PARSED (success) or FAILED (error)\nAfter parsing, the file stays in PARSED. The actual transaction import\nuses POST /transactions and doesn't change file status."
      },
      "BRIMMatchConfidence": {
        "type": "string",
        "enum": [
          "exact",
          "high",
          "medium",
          "low"
        ],
        "title": "BRIMMatchConfidence",
        "description": "Confidence level for asset candidate matching.\n\nCriteria:\n- EXACT: ISIN match (ISIN is globally unique identifier)\n- HIGH: Symbol exact match + same asset type\n- MEDIUM: Symbol exact match only (no type verification)\n- LOW: Partial name match or fuzzy symbol match"
      },
      "BRIMParseRequest": {
        "properties": {
          "plugin_code": {
            "type": "string",
            "title": "Plugin Code",
            "description": "Plugin code to use for parsing. Use 'auto' for automatic detection.",
            "default": "auto"
          },
          "broker_id": {
            "type": "integer",
            "exclusiveMinimum": 0.0,
            "title": "Broker Id",
            "description": "Target broker ID"
          }
        },
        "type": "object",
        "required": [
          "broker_id"
        ],
        "title": "BRIMParseRequest",
        "description": "Request to parse an uploaded file (preview mode).\n\nThe parsed transactions are returned for user review before import.\nUser can modify the transactions before sending to /import endpoint.\n\nAttributes:\n    plugin_code: Plugin to use for parsing. Use 'auto' or omit for auto-detection.\n    broker_id: Target broker ID for the transactions"
      },
      "BRIMParseResponse": {
        "properties": {
          "file_id": {
            "type": "string",
            "title": "File Id",
            "description": "UUID of the parsed file"
          },
          "plugin_code": {
            "type": "string",
            "title": "Plugin Code",
            "description": "Plugin used for parsing"
          },
          "broker_id": {
            "type": "integer",
            "exclusiveMinimum": 0.0,
            "title": "Broker Id",
            "description": "Target broker ID"
          },
          "transactions": {
            "items": {
              "$ref": "#/components/schemas/TXCreateItem-Output"
            },
            "type": "array",
            "title": "Transactions",
            "description": "Parsed transactions (may have fake asset IDs)"
          },
          "asset_mappings": {
            "items": {
              "$ref": "#/components/schemas/BRIMAssetMapping"
            },
            "type": "array",
            "title": "Asset Mappings",
            "description": "Fake asset ID \u2192 candidate real assets mapping"
          },
          "duplicates": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/BRIMDuplicateReport"
              },
              {
                "type": "null"
              }
            ],
            "description": "Duplicate detection results"
          },
          "warnings": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Warnings",
            "description": "Parser warnings (skipped rows, ambiguous data, etc.)"
          }
        },
        "type": "object",
        "required": [
          "file_id",
          "plugin_code",
          "broker_id"
        ],
        "title": "BRIMParseResponse",
        "description": "Response from parsing a broker report file.\n\nContains:\n- Parsed transactions with fake asset IDs where applicable\n- Asset mappings: fake ID \u2192 candidate real assets from DB\n- Duplicate report: which transactions might already exist\n- Warnings: skipped rows, ambiguous data, etc.\n\nFrontend workflow:\n1. Show transactions with asset mappings for user to resolve\n2. Show duplicate report for user to decide what to import\n3. User edits, selects assets, unchecks duplicates\n4. Frontend replaces fake IDs with selected real IDs\n5. Frontend sends final transaction list to /import endpoint"
      },
      "BRIMPluginInfo": {
        "properties": {
          "code": {
            "type": "string",
            "title": "Code",
            "description": "Unique plugin identifier"
          },
          "name": {
            "type": "string",
            "title": "Name",
            "description": "Human-readable plugin name"
          },
          "description": {
            "type": "string",
            "title": "Description",
            "description": "Plugin description for UI"
          },
          "supported_extensions": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Supported Extensions",
            "description": "Supported file extensions (e.g., ['.csv', '.xlsx'])"
          },
          "icon_url": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Icon Url",
            "description": "URL to broker icon/logo (absolute URL or relative path)"
          }
        },
        "type": "object",
        "required": [
          "code",
          "name",
          "description"
        ],
        "title": "BRIMPluginInfo",
        "description": "Information about an available import plugin.\n\nAttributes:\n    code: Unique plugin identifier (e.g., 'broker_generic_csv')\n    name: Human-readable name (e.g., 'Generic CSV')\n    description: Plugin description for UI\n    supported_extensions: List of supported file extensions\n    icon_url: URL to the broker's icon/logo (optional)"
      },
      "BRIMTXDuplicateCandidate": {
        "properties": {
          "tx_row_index": {
            "type": "integer",
            "title": "Tx Row Index",
            "description": "Row index in parsed transactions list"
          },
          "tx_parsed": {
            "$ref": "#/components/schemas/TXCreateItem-Output",
            "description": "The parsed transaction"
          },
          "tx_existing_matches": {
            "items": {
              "$ref": "#/components/schemas/BRIMDuplicateMatch"
            },
            "type": "array",
            "title": "Tx Existing Matches",
            "description": "Existing transactions that match"
          }
        },
        "type": "object",
        "required": [
          "tx_row_index",
          "tx_parsed"
        ],
        "title": "BRIMTXDuplicateCandidate",
        "description": "A parsed transaction that may be a duplicate of existing transactions."
      },
      "BRReadItem": {
        "properties": {
          "id": {
            "type": "integer",
            "title": "Id"
          },
          "name": {
            "type": "string",
            "title": "Name"
          },
          "description": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Description"
          },
          "portal_url": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Portal Url"
          },
          "allow_cash_overdraft": {
            "type": "boolean",
            "title": "Allow Cash Overdraft"
          },
          "allow_asset_shorting": {
            "type": "boolean",
            "title": "Allow Asset Shorting"
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "title": "Created At"
          },
          "updated_at": {
            "type": "string",
            "format": "date-time",
            "title": "Updated At"
          }
        },
        "additionalProperties": false,
        "type": "object",
        "required": [
          "id",
          "name",
          "allow_cash_overdraft",
          "allow_asset_shorting",
          "created_at",
          "updated_at"
        ],
        "title": "BRReadItem",
        "description": "DTO for reading broker basic data.\n\nResponse format for GET operations.\nMaps directly from Broker SQLModel."
      },
      "BRSummary": {
        "properties": {
          "id": {
            "type": "integer",
            "title": "Id"
          },
          "name": {
            "type": "string",
            "title": "Name"
          },
          "description": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Description"
          },
          "portal_url": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Portal Url"
          },
          "allow_cash_overdraft": {
            "type": "boolean",
            "title": "Allow Cash Overdraft"
          },
          "allow_asset_shorting": {
            "type": "boolean",
            "title": "Allow Asset Shorting"
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "title": "Created At"
          },
          "updated_at": {
            "type": "string",
            "format": "date-time",
            "title": "Updated At"
          },
          "cash_balances": {
            "items": {
              "$ref": "#/components/schemas/Currency-Output"
            },
            "type": "array",
            "title": "Cash Balances",
            "description": "Current cash balance per currency"
          },
          "holdings": {
            "items": {
              "$ref": "#/components/schemas/BRAssetHolding"
            },
            "type": "array",
            "title": "Holdings",
            "description": "Current asset holdings with cost basis and market value"
          },
          "total_value_base_currency": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/Currency-Output"
              },
              {
                "type": "null"
              }
            ],
            "description": "Total portfolio value in base currency (cash + holdings)"
          }
        },
        "additionalProperties": false,
        "type": "object",
        "required": [
          "id",
          "name",
          "allow_cash_overdraft",
          "allow_asset_shorting",
          "created_at",
          "updated_at"
        ],
        "title": "BRSummary",
        "description": "Broker with computed cash balances and asset holdings.\n\nIncludes:\n- Current cash balance per currency (computed from transactions)\n- Asset holdings with cost basis and market value\n- Total portfolio value in base currency (if FX rates available)"
      },
      "BRUpdateItem": {
        "properties": {
          "name": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 100,
                "minLength": 1
              },
              {
                "type": "null"
              }
            ],
            "title": "Name",
            "description": "New broker name"
          },
          "description": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 500
              },
              {
                "type": "null"
              }
            ],
            "title": "Description",
            "description": "New description"
          },
          "portal_url": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 255
              },
              {
                "type": "null"
              }
            ],
            "title": "Portal Url",
            "description": "New portal URL"
          },
          "allow_cash_overdraft": {
            "anyOf": [
              {
                "type": "boolean"
              },
              {
                "type": "null"
              }
            ],
            "title": "Allow Cash Overdraft",
            "description": "Update overdraft permission"
          },
          "allow_asset_shorting": {
            "anyOf": [
              {
                "type": "boolean"
              },
              {
                "type": "null"
              }
            ],
            "title": "Allow Asset Shorting",
            "description": "Update shorting permission"
          }
        },
        "additionalProperties": false,
        "type": "object",
        "title": "BRUpdateItem",
        "description": "DTO for updating a broker.\n\nAll fields are optional.\nOnly provided fields will be updated.\n\nNote: Changing flags from True to False triggers balance validation."
      },
      "BRUpdateResult": {
        "properties": {
          "id": {
            "type": "integer",
            "title": "Id"
          },
          "success": {
            "type": "boolean",
            "title": "Success"
          },
          "validation_triggered": {
            "type": "boolean",
            "title": "Validation Triggered",
            "description": "Whether balance validation was triggered due to flag change",
            "default": false
          },
          "error": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Error"
          }
        },
        "additionalProperties": false,
        "type": "object",
        "required": [
          "id",
          "success"
        ],
        "title": "BRUpdateResult",
        "description": "Result for a single broker update attempt."
      },
      "BackwardFillInfo": {
        "properties": {
          "actual_rate_date": {
            "type": "string",
            "format": "date",
            "title": "Actual Rate Date",
            "description": "ISO date of actual data used (YYYY-MM-DD)"
          },
          "days_back": {
            "type": "integer",
            "title": "Days Back",
            "description": "Number of days back from requested date"
          }
        },
        "type": "object",
        "required": [
          "actual_rate_date",
          "days_back"
        ],
        "title": "BackwardFillInfo",
        "description": "Backward-fill information when requested date has no data.\n\nUsed by both FX (fx.py) and Asset pricing (asset_source.py) systems\nto indicate when historical data was used instead of exact date match.\n\nAttributes:\n    actual_rate_date: stored as a `date` (accepts ISO string, `date` or `datetime` on input)\n    days_back: Number of days back from requested date\n\nExamples:\n    # Exact match - backward_fill_info is None\n    {\n        \"date\": \"2025-11-05\",\n        \"value\": 1.234,\n        \"backward_fill_info\": None\n    }\n\n    # Backfilled - used data from 3 days earlier\n    {\n        \"date\": \"2025-11-05\",\n        \"value\": 1.234,\n        \"backward_fill_info\": {\n            \"actual_rate_date\": \"2025-11-02\",\n            \"days_back\": 3\n        }\n    }"
      },
      "Body_upload_file_api_v1_brokers_import_upload_post": {
        "properties": {
          "file": {
            "type": "string",
            "format": "binary",
            "title": "File",
            "description": "Broker report file to upload"
          }
        },
        "type": "object",
        "required": [
          "file"
        ],
        "title": "Body_upload_file_api_v1_brokers_import_upload_post"
      },
      "CountryListItem": {
        "properties": {
          "iso3": {
            "type": "string",
            "title": "Iso3",
            "description": "ISO-3166-A3 country code (e.g., USA, ITA)"
          },
          "iso2": {
            "type": "string",
            "title": "Iso2",
            "description": "ISO-3166-A2 country code (e.g., US, IT)"
          },
          "name": {
            "type": "string",
            "title": "Name",
            "description": "Country name in requested language"
          },
          "flag_emoji": {
            "type": "string",
            "title": "Flag Emoji",
            "description": "Flag emoji (e.g., \ud83c\uddfa\ud83c\uddf8, \ud83c\uddee\ud83c\uddf9)"
          }
        },
        "additionalProperties": false,
        "type": "object",
        "required": [
          "iso3",
          "iso2",
          "name",
          "flag_emoji"
        ],
        "title": "CountryListItem",
        "description": "Single country in the country list."
      },
      "CountryListResponse": {
        "properties": {
          "countries": {
            "items": {
              "$ref": "#/components/schemas/CountryListItem"
            },
            "type": "array",
            "title": "Countries",
            "description": "List of all countries"
          },
          "count": {
            "type": "integer",
            "title": "Count",
            "description": "Number of countries"
          },
          "language": {
            "type": "string",
            "title": "Language",
            "description": "Language used for country names"
          }
        },
        "additionalProperties": false,
        "type": "object",
        "required": [
          "countries",
          "count",
          "language"
        ],
        "title": "CountryListResponse",
        "description": "Response for countries list endpoint."
      },
      "CountryNormalizationResponse": {
        "properties": {
          "query": {
            "type": "string",
            "title": "Query",
            "description": "Original query string"
          },
          "iso3_codes": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Iso3 Codes",
            "description": "List of ISO-3166-A3 country codes"
          },
          "match_type": {
            "type": "string",
            "title": "Match Type",
            "description": "Match type: exact, region, multi-match, not_found"
          },
          "error": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Error",
            "description": "Error message if normalization failed"
          }
        },
        "additionalProperties": false,
        "type": "object",
        "required": [
          "query",
          "iso3_codes",
          "match_type"
        ],
        "title": "CountryNormalizationResponse",
        "description": "Response for country normalization endpoint."
      },
      "Currency-Input": {
        "properties": {
          "code": {
            "type": "string",
            "title": "Code",
            "description": "ISO 4217 currency code or crypto symbol"
          },
          "amount": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "string",
                "pattern": "^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$"
              }
            ],
            "title": "Amount",
            "description": "Amount (can be negative)"
          }
        },
        "additionalProperties": false,
        "type": "object",
        "required": [
          "code",
          "amount"
        ],
        "title": "Currency",
        "description": "Currency amount with validation and arithmetic operations.\n\nValidates currency codes against ISO 4217 (via pycountry) + crypto dict.\nSupports addition/subtraction only between same currencies.\nAmount can be negative.\n\nAttributes:\n    code: ISO 4217 currency code (USD, EUR) or crypto symbol (BTC, ETH)\n    amount: Decimal amount (can be negative)\n\nExamples:\n    >>> usd = Currency(code=\"USD\", amount=Decimal(\"100.50\"))\n    >>> fee = Currency(code=\"USD\", amount=Decimal(\"2.50\"))\n    >>> total = usd + fee  # Currency(code=\"USD\", amount=Decimal(\"103.00\"))\n\n    >>> eur = Currency(code=\"EUR\", amount=Decimal(\"50\"))\n    >>> usd + eur  # ValueError: Cannot add USD and EUR\n\n    >>> btc = Currency(code=\"BTC\", amount=Decimal(\"0.5\"))  # Valid crypto\n\n    >>> negative = -usd  # Currency(code=\"USD\", amount=Decimal(\"-100.50\"))\n\nRaises:\n    ValueError: If currency code is not valid ISO 4217 or supported crypto"
      },
      "Currency-Output": {
        "properties": {
          "code": {
            "type": "string",
            "title": "Code",
            "description": "ISO 4217 currency code or crypto symbol"
          },
          "amount": {
            "type": "string",
            "pattern": "^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$",
            "title": "Amount",
            "description": "Amount (can be negative)"
          }
        },
        "additionalProperties": false,
        "type": "object",
        "required": [
          "code",
          "amount"
        ],
        "title": "Currency",
        "description": "Currency amount with validation and arithmetic operations.\n\nValidates currency codes against ISO 4217 (via pycountry) + crypto dict.\nSupports addition/subtraction only between same currencies.\nAmount can be negative.\n\nAttributes:\n    code: ISO 4217 currency code (USD, EUR) or crypto symbol (BTC, ETH)\n    amount: Decimal amount (can be negative)\n\nExamples:\n    >>> usd = Currency(code=\"USD\", amount=Decimal(\"100.50\"))\n    >>> fee = Currency(code=\"USD\", amount=Decimal(\"2.50\"))\n    >>> total = usd + fee  # Currency(code=\"USD\", amount=Decimal(\"103.00\"))\n\n    >>> eur = Currency(code=\"EUR\", amount=Decimal(\"50\"))\n    >>> usd + eur  # ValueError: Cannot add USD and EUR\n\n    >>> btc = Currency(code=\"BTC\", amount=Decimal(\"0.5\"))  # Valid crypto\n\n    >>> negative = -usd  # Currency(code=\"USD\", amount=Decimal(\"-100.50\"))\n\nRaises:\n    ValueError: If currency code is not valid ISO 4217 or supported crypto"
      },
      "CurrencyListItem": {
        "properties": {
          "code": {
            "type": "string",
            "title": "Code",
            "description": "ISO 4217 currency code (e.g., USD, EUR)"
          },
          "name": {
            "type": "string",
            "title": "Name",
            "description": "Currency name in requested language"
          },
          "symbol": {
            "type": "string",
            "title": "Symbol",
            "description": "Currency symbol (e.g., $, \u20ac)"
          }
        },
        "additionalProperties": false,
        "type": "object",
        "required": [
          "code",
          "name",
          "symbol"
        ],
        "title": "CurrencyListItem",
        "description": "Single currency in the currency list."
      },
      "CurrencyListResponse": {
        "properties": {
          "currencies": {
            "items": {
              "$ref": "#/components/schemas/CurrencyListItem"
            },
            "type": "array",
            "title": "Currencies",
            "description": "List of all currencies"
          },
          "count": {
            "type": "integer",
            "title": "Count",
            "description": "Number of currencies"
          },
          "language": {
            "type": "string",
            "title": "Language",
            "description": "Language used for currency names"
          }
        },
        "additionalProperties": false,
        "type": "object",
        "required": [
          "currencies",
          "count",
          "language"
        ],
        "title": "CurrencyListResponse",
        "description": "Response for currencies list endpoint."
      },
      "CurrencyNormalizationResponse": {
        "properties": {
          "query": {
            "type": "string",
            "title": "Query",
            "description": "Original query string"
          },
          "iso_codes": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Iso Codes",
            "description": "List of ISO 4217 currency codes"
          },
          "match_type": {
            "type": "string",
            "title": "Match Type",
            "description": "Match type: exact, symbol_ambiguous, multi-match, not_found"
          },
          "error": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Error",
            "description": "Error message if normalization failed"
          }
        },
        "additionalProperties": false,
        "type": "object",
        "required": [
          "query",
          "iso_codes",
          "match_type"
        ],
        "title": "CurrencyNormalizationResponse",
        "description": "Response for currency normalization endpoint."
      },
      "DateRangeModel": {
        "properties": {
          "start": {
            "type": "string",
            "format": "date",
            "title": "Start",
            "description": "Start date (inclusive)"
          },
          "end": {
            "anyOf": [
              {
                "type": "string",
                "format": "date"
              },
              {
                "type": "null"
              }
            ],
            "title": "End",
            "description": "End date (inclusive, optional = single day)"
          }
        },
        "additionalProperties": false,
        "type": "object",
        "required": [
          "start"
        ],
        "title": "DateRangeModel",
        "description": "Reusable date range model for FA and FX operations.\n\nUsed across multiple operations: price deletion, FX rate queries, etc.\nRepresents an inclusive date range [start, end].\n\nAttributes:\n    start: Start date (inclusive, required)\n    end: End date (inclusive, optional - defaults to start for single day)\n\nDesign Notes:\n    - If end is None, represents a single day (start only)\n    - If end is provided, represents a range [start, end] inclusive\n    - Validator ensures end >= start when provided\n\nExamples:\n    # Single day\n    {\"start\": \"2025-11-05\", \"end\": null}  # Just 2025-11-05\n\n    # Range\n    {\"start\": \"2025-11-01\", \"end\": \"2025-11-30\"}  # Entire November"
      },
      "ExportFormat": {
        "type": "string",
        "enum": [
          "json",
          "csv",
          "sqlite"
        ],
        "title": "ExportFormat",
        "description": "Supported export formats."
      },
      "ExportRequest": {
        "properties": {
          "format": {
            "$ref": "#/components/schemas/ExportFormat",
            "default": "json"
          },
          "scope": {
            "items": {
              "$ref": "#/components/schemas/ExportScope"
            },
            "type": "array",
            "title": "Scope",
            "default": [
              "all"
            ]
          },
          "include_price_history": {
            "type": "boolean",
            "title": "Include Price History",
            "default": false
          },
          "broker_ids": {
            "anyOf": [
              {
                "items": {
                  "type": "integer"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Broker Ids"
          }
        },
        "type": "object",
        "title": "ExportRequest",
        "description": "Request for data export."
      },
      "ExportResponse": {
        "properties": {
          "download_url": {
            "type": "string",
            "title": "Download Url"
          },
          "filename": {
            "type": "string",
            "title": "Filename"
          },
          "size_bytes": {
            "type": "integer",
            "title": "Size Bytes"
          },
          "expires_at": {
            "type": "string",
            "title": "Expires At"
          }
        },
        "type": "object",
        "required": [
          "download_url",
          "filename",
          "size_bytes",
          "expires_at"
        ],
        "title": "ExportResponse",
        "description": "Response with export file info."
      },
      "ExportScope": {
        "type": "string",
        "enum": [
          "all",
          "transactions",
          "assets",
          "brokers",
          "settings"
        ],
        "title": "ExportScope",
        "description": "What to include in export."
      },
      "FAAssetCreateItem": {
        "properties": {
          "display_name": {
            "type": "string",
            "title": "Display Name",
            "description": "Human-readable asset name (must be unique)"
          },
          "currency": {
            "type": "string",
            "maxLength": 3,
            "minLength": 3,
            "title": "Currency",
            "description": "Asset currency (ISO 4217)"
          },
          "asset_type": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/AssetType"
              },
              {
                "type": "null"
              }
            ],
            "description": "Asset type (STOCK, ETF, BOND, CROWDFUND_LOAN, etc.)"
          },
          "icon_url": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Icon Url",
            "description": "URL to asset icon (local or remote)"
          },
          "classification_params": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/FAClassificationParams-Input"
              },
              {
                "type": "null"
              }
            ],
            "description": "Asset classification metadata"
          },
          "identifier_isin": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 12
              },
              {
                "type": "null"
              }
            ],
            "title": "Identifier Isin",
            "description": "ISIN code (12 chars)"
          },
          "identifier_ticker": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 20
              },
              {
                "type": "null"
              }
            ],
            "title": "Identifier Ticker",
            "description": "Ticker symbol"
          },
          "identifier_cusip": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 9
              },
              {
                "type": "null"
              }
            ],
            "title": "Identifier Cusip",
            "description": "CUSIP code (9 chars)"
          },
          "identifier_sedol": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 7
              },
              {
                "type": "null"
              }
            ],
            "title": "Identifier Sedol",
            "description": "SEDOL code (7 chars)"
          },
          "identifier_figi": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 12
              },
              {
                "type": "null"
              }
            ],
            "title": "Identifier Figi",
            "description": "FIGI code (12 chars)"
          },
          "identifier_uuid": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 36
              },
              {
                "type": "null"
              }
            ],
            "title": "Identifier Uuid",
            "description": "UUID for custom assets"
          },
          "identifier_other": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 100
              },
              {
                "type": "null"
              }
            ],
            "title": "Identifier Other",
            "description": "Other identifier"
          }
        },
        "additionalProperties": false,
        "type": "object",
        "required": [
          "display_name",
          "currency"
        ],
        "title": "FAAssetCreateItem",
        "description": "Single asset to create in bulk operation.\n\nIdentifier fields (identifier_isin, identifier_ticker, etc.) are stored directly on Asset.\nProvider assignment can be done separately via POST /assets/provider."
      },
      "FAAssetCreateResult": {
        "properties": {
          "asset_id": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Asset Id",
            "description": "Created asset ID (null if failed)"
          },
          "success": {
            "type": "boolean",
            "title": "Success",
            "description": "Whether creation succeeded"
          },
          "message": {
            "type": "string",
            "title": "Message",
            "description": "Success message or error description"
          },
          "display_name": {
            "type": "string",
            "title": "Display Name",
            "description": "Asset display name (for identification)"
          }
        },
        "additionalProperties": false,
        "type": "object",
        "required": [
          "success",
          "message",
          "display_name"
        ],
        "title": "FAAssetCreateResult",
        "description": "Result of single asset creation in bulk operation."
      },
      "FAAssetDelete": {
        "properties": {
          "asset_id": {
            "type": "integer",
            "title": "Asset Id",
            "description": "Asset ID"
          },
          "date_ranges": {
            "items": {
              "$ref": "#/components/schemas/DateRangeModel"
            },
            "type": "array",
            "minItems": 1,
            "title": "Date Ranges",
            "description": "List of date ranges to delete"
          }
        },
        "additionalProperties": false,
        "type": "object",
        "required": [
          "asset_id",
          "date_ranges"
        ],
        "title": "FAAssetDelete",
        "description": "Price deletion request for a single asset (multiple ranges).\n\nGroups multiple date ranges for one asset.\nUses DateRangeModel for consistency."
      },
      "FAAssetDeleteResult": {
        "properties": {
          "success": {
            "type": "boolean",
            "title": "Success",
            "description": "Whether the deletion succeeded"
          },
          "deleted_count": {
            "type": "integer",
            "minimum": 0.0,
            "title": "Deleted Count",
            "description": "Number of items deleted"
          },
          "message": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Message",
            "description": "Info/warning/error message"
          },
          "asset_id": {
            "type": "integer",
            "title": "Asset Id",
            "description": "Asset ID"
          }
        },
        "additionalProperties": false,
        "type": "object",
        "required": [
          "success",
          "deleted_count",
          "asset_id"
        ],
        "title": "FAAssetDeleteResult",
        "description": "Result of single asset deletion in bulk operation."
      },
      "FAAssetMetadataResponse": {
        "properties": {
          "asset_id": {
            "type": "integer",
            "title": "Asset Id"
          },
          "display_name": {
            "type": "string",
            "title": "Display Name"
          },
          "currency": {
            "type": "string",
            "title": "Currency"
          },
          "icon_url": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Icon Url"
          },
          "asset_type": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Asset Type"
          },
          "classification_params": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/FAClassificationParams-Output"
              },
              {
                "type": "null"
              }
            ]
          },
          "has_provider": {
            "type": "boolean",
            "title": "Has Provider",
            "default": false
          }
        },
        "additionalProperties": false,
        "type": "object",
        "required": [
          "asset_id",
          "display_name",
          "currency"
        ],
        "title": "FAAssetMetadataResponse",
        "description": "Asset with metadata fields.\n\nUsed for GET/PATCH responses and bulk read operations.\n\nFields:\n- asset_id: Asset database ID\n- display_name: User-friendly asset name\n- currency: Asset currency code\n- icon_url: Asset icon URL (optional)\n- asset_type: Asset type (STOCK, BOND, ETF, etc.)\n- classification_params: Optional classification metadata\n- has_provider: Whether asset has pricing provider assigned"
      },
      "FAAssetPatchItem": {
        "properties": {
          "asset_id": {
            "type": "integer",
            "title": "Asset Id",
            "description": "Asset ID to update"
          },
          "display_name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Display Name",
            "description": "Update display name"
          },
          "currency": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 3,
                "minLength": 3
              },
              {
                "type": "null"
              }
            ],
            "title": "Currency",
            "description": "Update currency (ISO 4217)"
          },
          "asset_type": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/AssetType"
              },
              {
                "type": "null"
              }
            ],
            "description": "Update asset type (STOCK, ETF, BOND, etc.)"
          },
          "icon_url": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Icon Url",
            "description": "Update icon URL (None = clear)"
          },
          "classification_params": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/FAClassificationParams-Input"
              },
              {
                "type": "null"
              }
            ],
            "description": "Update classification (None = clear)"
          },
          "active": {
            "anyOf": [
              {
                "type": "boolean"
              },
              {
                "type": "null"
              }
            ],
            "title": "Active",
            "description": "Update active status"
          },
          "identifier_isin": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 12
              },
              {
                "type": "null"
              }
            ],
            "title": "Identifier Isin",
            "description": "Update ISIN code"
          },
          "identifier_ticker": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 20
              },
              {
                "type": "null"
              }
            ],
            "title": "Identifier Ticker",
            "description": "Update ticker symbol"
          },
          "identifier_cusip": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 9
              },
              {
                "type": "null"
              }
            ],
            "title": "Identifier Cusip",
            "description": "Update CUSIP code"
          },
          "identifier_sedol": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 7
              },
              {
                "type": "null"
              }
            ],
            "title": "Identifier Sedol",
            "description": "Update SEDOL code"
          },
          "identifier_figi": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 12
              },
              {
                "type": "null"
              }
            ],
            "title": "Identifier Figi",
            "description": "Update FIGI code"
          },
          "identifier_uuid": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 36
              },
              {
                "type": "null"
              }
            ],
            "title": "Identifier Uuid",
            "description": "Update UUID"
          },
          "identifier_other": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 100
              },
              {
                "type": "null"
              }
            ],
            "title": "Identifier Other",
            "description": "Update other identifier"
          }
        },
        "additionalProperties": false,
        "type": "object",
        "required": [
          "asset_id"
        ],
        "title": "FAAssetPatchItem",
        "description": "Single asset patch item for bulk update operations.\n\nMerge logic:\n- Field present in patch (even if None): UPDATE or BLANK\n- Field absent in patch: IGNORE (keep existing value)\n\nFor classification_params:\n- If None: Set DB column to NULL\n- If present: Full replace (no merge of subfields)"
      },
      "FAAssetPatchResult": {
        "properties": {
          "asset_id": {
            "type": "integer",
            "title": "Asset Id",
            "description": "Asset ID"
          },
          "success": {
            "type": "boolean",
            "title": "Success",
            "description": "Whether patch succeeded"
          },
          "message": {
            "type": "string",
            "title": "Message",
            "description": "Success message or error description"
          },
          "updated_fields": {
            "anyOf": [
              {
                "items": {
                  "$ref": "#/components/schemas/OldNew_Union_str__NoneType__"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Updated Fields",
            "description": "List of fields updated: [{info: field, old: old_value, new: new_value}]"
          }
        },
        "additionalProperties": false,
        "type": "object",
        "required": [
          "asset_id",
          "success",
          "message"
        ],
        "title": "FAAssetPatchResult",
        "description": "Result of single asset patch in bulk operation."
      },
      "FABulkAssetCreateResponse": {
        "properties": {
          "results": {
            "items": {
              "$ref": "#/components/schemas/FAAssetCreateResult"
            },
            "type": "array",
            "title": "Results",
            "description": "Per-item operation results"
          },
          "success_count": {
            "type": "integer",
            "minimum": 0.0,
            "title": "Success Count",
            "description": "Number of successful operations"
          },
          "errors": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Errors",
            "description": "Operation-level errors (not per-item)"
          }
        },
        "additionalProperties": false,
        "type": "object",
        "required": [
          "results",
          "success_count"
        ],
        "title": "FABulkAssetCreateResponse",
        "description": "Bulk asset creation response (partial success allowed)."
      },
      "FABulkAssetDeleteResponse": {
        "properties": {
          "results": {
            "items": {
              "$ref": "#/components/schemas/FAAssetDeleteResult"
            },
            "type": "array",
            "title": "Results",
            "description": "Per-item operation results"
          },
          "success_count": {
            "type": "integer",
            "minimum": 0.0,
            "title": "Success Count",
            "description": "Number of successful operations"
          },
          "errors": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Errors",
            "description": "Operation-level errors (not per-item)"
          }
        },
        "additionalProperties": false,
        "type": "object",
        "required": [
          "results",
          "success_count"
        ],
        "title": "FABulkAssetDeleteResponse",
        "description": "Bulk asset deletion response (partial success allowed)."
      },
      "FABulkAssetPatchResponse": {
        "properties": {
          "results": {
            "items": {
              "$ref": "#/components/schemas/FAAssetPatchResult"
            },
            "type": "array",
            "title": "Results",
            "description": "Per-item operation results"
          },
          "success_count": {
            "type": "integer",
            "minimum": 0.0,
            "title": "Success Count",
            "description": "Number of successful operations"
          },
          "errors": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Errors",
            "description": "Operation-level errors (not per-item)"
          }
        },
        "additionalProperties": false,
        "type": "object",
        "required": [
          "results",
          "success_count"
        ],
        "title": "FABulkAssetPatchResponse",
        "description": "Bulk asset patch response (partial success allowed)."
      },
      "FABulkAssignResponse": {
        "properties": {
          "results": {
            "items": {
              "$ref": "#/components/schemas/FAProviderAssignmentResult"
            },
            "type": "array",
            "title": "Results",
            "description": "Per-item operation results"
          },
          "success_count": {
            "type": "integer",
            "minimum": 0.0,
            "title": "Success Count",
            "description": "Number of successful operations"
          },
          "errors": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Errors",
            "description": "Operation-level errors (not per-item)"
          }
        },
        "additionalProperties": false,
        "type": "object",
        "required": [
          "results",
          "success_count"
        ],
        "title": "FABulkAssignResponse",
        "description": "Response for bulk FA provider assignment."
      },
      "FABulkDeleteResponse": {
        "properties": {
          "results": {
            "items": {
              "$ref": "#/components/schemas/FAPriceDeleteResult"
            },
            "type": "array",
            "title": "Results",
            "description": "Per-item operation results"
          },
          "success_count": {
            "type": "integer",
            "minimum": 0.0,
            "title": "Success Count",
            "description": "Number of successful operations"
          },
          "errors": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Errors",
            "description": "Operation-level errors (not per-item)"
          },
          "total_deleted": {
            "type": "integer",
            "minimum": 0.0,
            "title": "Total Deleted",
            "description": "Total number of records deleted across all items"
          }
        },
        "additionalProperties": false,
        "type": "object",
        "required": [
          "results",
          "success_count",
          "total_deleted"
        ],
        "title": "FABulkDeleteResponse",
        "description": "Response for bulk price deletion."
      },
      "FABulkMetadataRefreshResponse": {
        "properties": {
          "results": {
            "items": {
              "$ref": "#/components/schemas/FAMetadataRefreshResult"
            },
            "type": "array",
            "title": "Results",
            "description": "Per-item operation results"
          },
          "success_count": {
            "type": "integer",
            "minimum": 0.0,
            "title": "Success Count",
            "description": "Number of successful operations"
          },
          "errors": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Errors",
            "description": "Operation-level errors (not per-item)"
          }
        },
        "additionalProperties": false,
        "type": "object",
        "required": [
          "results",
          "success_count"
        ],
        "title": "FABulkMetadataRefreshResponse",
        "description": "Bulk metadata refresh response (partial success).\n\nEach result includes fields_detail with:\n- refreshed_fields: List[OldNew[str]] with old/new values\n- missing_data_fields: Fields provider didn't return\n- ignored_fields: Fields skipped (future use)"
      },
      "FABulkRefreshResponse": {
        "properties": {
          "results": {
            "items": {
              "$ref": "#/components/schemas/FARefreshResult"
            },
            "type": "array",
            "title": "Results",
            "description": "Per-item operation results"
          },
          "success_count": {
            "type": "integer",
            "minimum": 0.0,
            "title": "Success Count",
            "description": "Number of successful operations"
          },
          "errors": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Errors",
            "description": "Operation-level errors (not per-item)"
          }
        },
        "additionalProperties": false,
        "type": "object",
        "required": [
          "results",
          "success_count"
        ],
        "title": "FABulkRefreshResponse",
        "description": "Response for bulk asset price refresh."
      },
      "FABulkRemoveResponse": {
        "properties": {
          "results": {
            "items": {
              "$ref": "#/components/schemas/FAProviderRemovalResult"
            },
            "type": "array",
            "title": "Results",
            "description": "Per-item operation results"
          },
          "success_count": {
            "type": "integer",
            "minimum": 0.0,
            "title": "Success Count",
            "description": "Number of successful operations"
          },
          "errors": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Errors",
            "description": "Operation-level errors (not per-item)"
          }
        },
        "additionalProperties": false,
        "type": "object",
        "required": [
          "results",
          "success_count"
        ],
        "title": "FABulkRemoveResponse",
        "description": "Response for bulk FA provider removal."
      },
      "FABulkUpsertResponse": {
        "properties": {
          "results": {
            "items": {
              "$ref": "#/components/schemas/FAUpsertResult"
            },
            "type": "array",
            "title": "Results",
            "description": "Per-item operation results"
          },
          "success_count": {
            "type": "integer",
            "minimum": 0.0,
            "title": "Success Count",
            "description": "Number of successful operations"
          },
          "errors": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Errors",
            "description": "Operation-level errors (not per-item)"
          },
          "inserted_count": {
            "type": "integer",
            "title": "Inserted Count",
            "description": "Number of prices inserted"
          },
          "updated_count": {
            "type": "integer",
            "title": "Updated Count",
            "description": "Number of prices updated"
          }
        },
        "additionalProperties": false,
        "type": "object",
        "required": [
          "results",
          "success_count",
          "inserted_count",
          "updated_count"
        ],
        "title": "FABulkUpsertResponse",
        "description": "Response for bulk price upsert."
      },
      "FAClassificationParams-Input": {
        "properties": {
          "short_description": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Short Description"
          },
          "geographic_area": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/FAGeographicArea-Input"
              },
              {
                "type": "null"
              }
            ]
          },
          "sector_area": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/FASectorArea-Input"
              },
              {
                "type": "null"
              }
            ]
          }
        },
        "additionalProperties": false,
        "type": "object",
        "title": "FAClassificationParams",
        "description": "Asset classification metadata.\n\nAll fields optional (partial updates supported via PATCH).\ngeographic_area and sector_area are indivisible blocks (full replace on update, no merge).\n\nValidation:\n- geographic_area: ISO-3166-A3 codes, weights must sum to 1.0 (\u00b11e-6)\n- sector_area: Standard FinancialSector enum values, weights must sum to 1.0 (\u00b11e-6)\n- Weights quantized to 4 decimals (ROUND_HALF_EVEN)\n- Automatic renormalization if sum != 1.0\n\nExamples:\n    >>> params = FAClassificationParams(\n    ...     short_description=\"Apple Inc. - Technology company\",\n    ...     geographic_area=FAGeographicArea(distribution={\"USA\": Decimal(\"0.6\"), \"EUR\": Decimal(\"0.4\")}),\n    ...     sector_area=FASectorArea(distribution={\"Technology\": Decimal(\"1.0\")})\n    ... )"
      },
      "FAClassificationParams-Output": {
        "properties": {
          "short_description": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Short Description"
          },
          "geographic_area": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/FAGeographicArea-Output"
              },
              {
                "type": "null"
              }
            ]
          },
          "sector_area": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/FASectorArea-Output"
              },
              {
                "type": "null"
              }
            ]
          }
        },
        "additionalProperties": false,
        "type": "object",
        "title": "FAClassificationParams",
        "description": "Asset classification metadata.\n\nAll fields optional (partial updates supported via PATCH).\ngeographic_area and sector_area are indivisible blocks (full replace on update, no merge).\n\nValidation:\n- geographic_area: ISO-3166-A3 codes, weights must sum to 1.0 (\u00b11e-6)\n- sector_area: Standard FinancialSector enum values, weights must sum to 1.0 (\u00b11e-6)\n- Weights quantized to 4 decimals (ROUND_HALF_EVEN)\n- Automatic renormalization if sum != 1.0\n\nExamples:\n    >>> params = FAClassificationParams(\n    ...     short_description=\"Apple Inc. - Technology company\",\n    ...     geographic_area=FAGeographicArea(distribution={\"USA\": Decimal(\"0.6\"), \"EUR\": Decimal(\"0.4\")}),\n    ...     sector_area=FASectorArea(distribution={\"Technology\": Decimal(\"1.0\")})\n    ... )"
      },
      "FAGeographicArea-Input": {
        "properties": {
          "distribution": {
            "additionalProperties": {
              "anyOf": [
                {
                  "type": "number"
                },
                {
                  "type": "string",
                  "pattern": "^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$"
                }
              ]
            },
            "type": "object",
            "title": "Distribution",
            "description": "Distribution weights (must sum to 1.0)"
          }
        },
        "additionalProperties": false,
        "type": "object",
        "required": [
          "distribution"
        ],
        "title": "FAGeographicArea",
        "description": "Geographic area distribution with ISO-3166-A3 validation.\n\nExtends BaseDistribution with country code normalization.\nKeys must be ISO-3166-A3 country codes (or names/ISO-2 that will be normalized).\n\nExamples:\n    >>> geo = FAGeographicArea(distribution={\"USA\": Decimal(\"0.6\"), \"ITA\": Decimal(\"0.4\")})\n    >>> geo.distribution\n    {'USA': Decimal('0.6000'), 'ITA': Decimal('0.4000')}\n\n    >>> geo = FAGeographicArea(distribution={\"US\": 0.5, \"Italy\": 0.5})\n    >>> geo.distribution\n    {'USA': Decimal('0.5000'), 'ITA': Decimal('0.5000')}"
      },
      "FAGeographicArea-Output": {
        "properties": {
          "distribution": {
            "additionalProperties": {
              "type": "string",
              "pattern": "^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$"
            },
            "type": "object",
            "title": "Distribution",
            "description": "Distribution weights (must sum to 1.0)"
          }
        },
        "additionalProperties": false,
        "type": "object",
        "required": [
          "distribution"
        ],
        "title": "FAGeographicArea",
        "description": "Geographic area distribution with ISO-3166-A3 validation.\n\nExtends BaseDistribution with country code normalization.\nKeys must be ISO-3166-A3 country codes (or names/ISO-2 that will be normalized).\n\nExamples:\n    >>> geo = FAGeographicArea(distribution={\"USA\": Decimal(\"0.6\"), \"ITA\": Decimal(\"0.4\")})\n    >>> geo.distribution\n    {'USA': Decimal('0.6000'), 'ITA': Decimal('0.4000')}\n\n    >>> geo = FAGeographicArea(distribution={\"US\": 0.5, \"Italy\": 0.5})\n    >>> geo.distribution\n    {'USA': Decimal('0.5000'), 'ITA': Decimal('0.5000')}"
      },
      "FAMetadataRefreshResult": {
        "properties": {
          "asset_id": {
            "type": "integer",
            "title": "Asset Id"
          },
          "success": {
            "type": "boolean",
            "title": "Success"
          },
          "message": {
            "type": "string",
            "title": "Message"
          },
          "fields_detail": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/FAProviderRefreshFieldsDetail"
              },
              {
                "type": "null"
              }
            ],
            "description": "Details of refreshed fields with old/new values"
          },
          "warnings": {
            "anyOf": [
              {
                "items": {
                  "type": "string"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Warnings"
          }
        },
        "additionalProperties": false,
        "type": "object",
        "required": [
          "asset_id",
          "success",
          "message"
        ],
        "title": "FAMetadataRefreshResult",
        "description": "Result of metadata refresh for single asset.\n\nFollows FA pattern: { asset_id, success, message, ... }\nIncludes fields_detail with old/new values for each refreshed field."
      },
      "FAPriceDeleteResult": {
        "properties": {
          "success": {
            "type": "boolean",
            "title": "Success",
            "description": "Whether the deletion succeeded"
          },
          "deleted_count": {
            "type": "integer",
            "minimum": 0.0,
            "title": "Deleted Count",
            "description": "Number of items deleted"
          },
          "message": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Message",
            "description": "Info/warning/error message"
          },
          "asset_id": {
            "type": "integer",
            "title": "Asset Id",
            "description": "Asset ID"
          }
        },
        "additionalProperties": false,
        "type": "object",
        "required": [
          "success",
          "deleted_count",
          "asset_id"
        ],
        "title": "FAPriceDeleteResult",
        "description": "Result of price deletion for single asset."
      },
      "FAPricePoint-Input": {
        "properties": {
          "date": {
            "type": "string",
            "format": "date",
            "title": "Date",
            "description": "Price date"
          },
          "open": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "string",
                "pattern": "^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$"
              },
              {
                "type": "null"
              }
            ],
            "title": "Open",
            "description": "Opening price"
          },
          "high": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "string",
                "pattern": "^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$"
              },
              {
                "type": "null"
              }
            ],
            "title": "High",
            "description": "High price"
          },
          "low": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "string",
                "pattern": "^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$"
              },
              {
                "type": "null"
              }
            ],
            "title": "Low",
            "description": "Low price"
          },
          "close": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "string",
                "pattern": "^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$"
              }
            ],
            "title": "Close",
            "description": "Closing price (required)"
          },
          "volume": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "string",
                "pattern": "^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$"
              },
              {
                "type": "null"
              }
            ],
            "title": "Volume",
            "description": "Trading volume"
          },
          "currency": {
            "type": "string",
            "title": "Currency",
            "description": "Currency code (ISO 4217)"
          },
          "backward_fill_info": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/BackwardFillInfo"
              },
              {
                "type": "null"
              }
            ],
            "description": "Backward-fill info (only in query results)"
          }
        },
        "additionalProperties": false,
        "type": "object",
        "required": [
          "date",
          "close",
          "currency"
        ],
        "title": "FAPricePoint",
        "description": "Single price point with OHLC data.\n\nUsed for both:\n- Upsert operations (backward_fill_info is None)\n- Query results (backward_fill_info may be present)\n\nThe API contract uses separate `close: Decimal` and `currency: str` fields\nfor JSON compatibility. Use `close_cur` property for internal operations\nthat need a Currency object."
      },
      "FAPricePoint-Output": {
        "properties": {
          "date": {
            "type": "string",
            "format": "date",
            "title": "Date",
            "description": "Price date"
          },
          "open": {
            "anyOf": [
              {
                "type": "string",
                "pattern": "^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$"
              },
              {
                "type": "null"
              }
            ],
            "title": "Open",
            "description": "Opening price"
          },
          "high": {
            "anyOf": [
              {
                "type": "string",
                "pattern": "^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$"
              },
              {
                "type": "null"
              }
            ],
            "title": "High",
            "description": "High price"
          },
          "low": {
            "anyOf": [
              {
                "type": "string",
                "pattern": "^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$"
              },
              {
                "type": "null"
              }
            ],
            "title": "Low",
            "description": "Low price"
          },
          "close": {
            "type": "string",
            "pattern": "^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$",
            "title": "Close",
            "description": "Closing price (required)"
          },
          "volume": {
            "anyOf": [
              {
                "type": "string",
                "pattern": "^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$"
              },
              {
                "type": "null"
              }
            ],
            "title": "Volume",
            "description": "Trading volume"
          },
          "currency": {
            "type": "string",
            "title": "Currency",
            "description": "Currency code (ISO 4217)"
          },
          "backward_fill_info": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/BackwardFillInfo"
              },
              {
                "type": "null"
              }
            ],
            "description": "Backward-fill info (only in query results)"
          }
        },
        "additionalProperties": false,
        "type": "object",
        "required": [
          "date",
          "close",
          "currency"
        ],
        "title": "FAPricePoint",
        "description": "Single price point with OHLC data.\n\nUsed for both:\n- Upsert operations (backward_fill_info is None)\n- Query results (backward_fill_info may be present)\n\nThe API contract uses separate `close: Decimal` and `currency: str` fields\nfor JSON compatibility. Use `close_cur` property for internal operations\nthat need a Currency object."
      },
      "FAProviderAssignmentItem": {
        "properties": {
          "asset_id": {
            "type": "integer",
            "title": "Asset Id",
            "description": "Asset ID"
          },
          "provider_code": {
            "type": "string",
            "title": "Provider Code",
            "description": "Provider code (yfinance, cssscraper, scheduled_investment, etc.)"
          },
          "identifier": {
            "type": "string",
            "title": "Identifier",
            "description": "Asset identifier for this provider (ticker, ISIN, UUID, URL, etc.)"
          },
          "identifier_type": {
            "$ref": "#/components/schemas/IdentifierType",
            "description": "Type of identifier (TICKER, ISIN, UUID, OTHER, etc.)"
          },
          "provider_params": {
            "anyOf": [
              {
                "additionalProperties": true,
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Provider Params",
            "description": "Provider-specific configuration (JSON)"
          },
          "fetch_interval": {
            "type": "integer",
            "title": "Fetch Interval",
            "description": "Refresh frequency in minutes (default: 1440 = 24h)",
            "default": 1440
          }
        },
        "additionalProperties": false,
        "type": "object",
        "required": [
          "asset_id",
          "provider_code",
          "identifier",
          "identifier_type"
        ],
        "title": "FAProviderAssignmentItem",
        "description": "Single FA provider assignment configuration.\n\nLinks an asset to a pricing provider with identifier and parameters.\n\nFields:\n- identifier: How the provider identifies this asset (ticker, ISIN, UUID, URL, etc.)\n- identifier_type: Type of identifier (TICKER, ISIN, UUID, OTHER, etc.)\n- provider_params: Provider-specific configuration (e.g., FAScheduledInvestmentSchedule for scheduled_investment)"
      },
      "FAProviderAssignmentReadItem": {
        "properties": {
          "asset_id": {
            "type": "integer",
            "title": "Asset Id",
            "description": "Asset ID"
          },
          "provider_code": {
            "type": "string",
            "title": "Provider Code",
            "description": "Provider code"
          },
          "identifier": {
            "type": "string",
            "title": "Identifier",
            "description": "Asset identifier for provider"
          },
          "identifier_type": {
            "$ref": "#/components/schemas/IdentifierType",
            "description": "Type of identifier"
          },
          "provider_params": {
            "anyOf": [
              {
                "additionalProperties": true,
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Provider Params",
            "description": "Provider configuration"
          },
          "fetch_interval": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Fetch Interval",
            "description": "Refresh frequency in minutes"
          },
          "last_fetch_at": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Last Fetch At",
            "description": "Last fetch timestamp (ISO format)"
          }
        },
        "additionalProperties": false,
        "type": "object",
        "required": [
          "asset_id",
          "provider_code",
          "identifier",
          "identifier_type"
        ],
        "title": "FAProviderAssignmentReadItem",
        "description": "Provider assignment read response (includes all fields).\n\nUsed for GET /assets/provider/assignments endpoint."
      },
      "FAProviderAssignmentResult": {
        "properties": {
          "asset_id": {
            "type": "integer",
            "title": "Asset Id"
          },
          "success": {
            "type": "boolean",
            "title": "Success"
          },
          "message": {
            "type": "string",
            "title": "Message"
          },
          "fields_detail": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/FAProviderRefreshFieldsDetail"
              },
              {
                "type": "null"
              }
            ],
            "description": "Field-level refresh details (for refresh operations)"
          }
        },
        "additionalProperties": false,
        "type": "object",
        "required": [
          "asset_id",
          "success",
          "message"
        ],
        "title": "FAProviderAssignmentResult",
        "description": "Result of single FA provider assignment or refresh."
      },
      "FAProviderInfo": {
        "properties": {
          "code": {
            "type": "string",
            "title": "Code",
            "description": "Provider code (e.g., yfinance, cssscraper)"
          },
          "name": {
            "type": "string",
            "title": "Name",
            "description": "Provider full name"
          },
          "description": {
            "type": "string",
            "title": "Description",
            "description": "Provider description"
          },
          "icon_url": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Icon Url",
            "description": "Provider icon URL (hardcoded)"
          },
          "supports_search": {
            "type": "boolean",
            "title": "Supports Search",
            "description": "Whether provider supports asset search"
          }
        },
        "additionalProperties": false,
        "type": "object",
        "required": [
          "code",
          "name",
          "description",
          "supports_search"
        ],
        "title": "FAProviderInfo",
        "description": "Information about a single Financial Asset pricing provider.\n\nUsed for provider discovery and capability inspection."
      },
      "FAProviderRefreshFieldsDetail": {
        "properties": {
          "refreshed_fields": {
            "items": {
              "$ref": "#/components/schemas/OldNew_Union_str__NoneType__"
            },
            "type": "array",
            "title": "Refreshed Fields",
            "description": "Fields updated with old\u2192new values. Old is None if first time set, new is None if field cleared."
          },
          "missing_data_fields": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Missing Data Fields",
            "description": "Fields provider couldn't fetch (no data available)"
          },
          "ignored_fields": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Ignored Fields",
            "description": "Fields ignored (not requested when using field selection)"
          }
        },
        "additionalProperties": false,
        "type": "object",
        "required": [
          "refreshed_fields",
          "missing_data_fields",
          "ignored_fields"
        ],
        "title": "FAProviderRefreshFieldsDetail",
        "description": "Field-level details for provider refresh operation.\n\nProvides granular information about which fields were updated during refresh,\nincluding old and new values for each changed field.\n\nExamples:\n    >>> detail = FAProviderRefreshFieldsDetail(\n    ...     refreshed_fields=[\n    ...         OldNew(info=\"sector\", old=\"Technology\", new=\"Industrials\"),\n    ...         OldNew(old=None, new=\"Test Corp\")  # First time set\n    ...     ],\n    ...     missing_data_fields=[\"currency\"],\n    ...     ignored_fields=[]\n    ... )"
      },
      "FAProviderRemovalResult": {
        "properties": {
          "success": {
            "type": "boolean",
            "title": "Success",
            "description": "Whether the deletion succeeded"
          },
          "deleted_count": {
            "type": "integer",
            "minimum": 0.0,
            "title": "Deleted Count",
            "description": "Number of items deleted"
          },
          "message": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Message",
            "description": "Info/warning/error message"
          },
          "asset_id": {
            "type": "integer",
            "title": "Asset Id",
            "description": "Asset ID"
          }
        },
        "additionalProperties": false,
        "type": "object",
        "required": [
          "success",
          "deleted_count",
          "asset_id"
        ],
        "title": "FAProviderRemovalResult",
        "description": "Result of single FA provider removal."
      },
      "FAProviderSearchResponse": {
        "properties": {
          "query": {
            "type": "string",
            "title": "Query",
            "description": "Original search query"
          },
          "total_results": {
            "type": "integer",
            "title": "Total Results",
            "description": "Total number of results across all providers"
          },
          "results": {
            "items": {
              "$ref": "#/components/schemas/FAProviderSearchResultItem"
            },
            "type": "array",
            "title": "Results",
            "description": "Search results"
          },
          "providers_queried": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Providers Queried",
            "description": "Provider codes that were queried"
          },
          "providers_with_errors": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Providers With Errors",
            "description": "Providers that returned errors"
          }
        },
        "additionalProperties": false,
        "type": "object",
        "required": [
          "query",
          "total_results",
          "results",
          "providers_queried"
        ],
        "title": "FAProviderSearchResponse",
        "description": "Response for provider search endpoint.\n\nReturns aggregated search results from one or more providers."
      },
      "FAProviderSearchResultItem": {
        "properties": {
          "identifier": {
            "type": "string",
            "title": "Identifier",
            "description": "Asset identifier (ISIN, ticker, URL, etc.)"
          },
          "identifier_type": {
            "$ref": "#/components/schemas/IdentifierType",
            "description": "Type of identifier (ISIN, TICKER, URL, etc.)"
          },
          "display_name": {
            "type": "string",
            "title": "Display Name",
            "description": "Human-readable asset name"
          },
          "provider_code": {
            "type": "string",
            "title": "Provider Code",
            "description": "Provider that returned this result"
          },
          "currency": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Currency",
            "description": "Asset currency if known"
          },
          "asset_type": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Asset Type",
            "description": "Asset type (ETF, stock, bond, etc.)"
          }
        },
        "additionalProperties": false,
        "type": "object",
        "required": [
          "identifier",
          "identifier_type",
          "display_name",
          "provider_code"
        ],
        "title": "FAProviderSearchResultItem",
        "description": "Single search result from a provider.\n\nContains the asset identifier and metadata from the provider's search.\nThe identifier_type field is required so the result can be used directly\nfor asset creation without needing to look up the identifier type."
      },
      "FARefreshItem": {
        "properties": {
          "asset_id": {
            "type": "integer",
            "title": "Asset Id",
            "description": "Asset ID"
          },
          "date_range": {
            "$ref": "#/components/schemas/DateRangeModel",
            "description": "Date range for refresh"
          }
        },
        "additionalProperties": false,
        "type": "object",
        "required": [
          "asset_id",
          "date_range"
        ],
        "title": "FARefreshItem",
        "description": "Single asset refresh request.\n\nSpecifies asset and date range for price data refresh from provider."
      },
      "FARefreshResult": {
        "properties": {
          "asset_id": {
            "type": "integer",
            "title": "Asset Id"
          },
          "fetched_count": {
            "type": "integer",
            "title": "Fetched Count",
            "description": "Number of prices fetched from provider"
          },
          "inserted_count": {
            "type": "integer",
            "title": "Inserted Count",
            "description": "Number of prices inserted into DB"
          },
          "updated_count": {
            "type": "integer",
            "title": "Updated Count",
            "description": "Number of prices updated in DB"
          },
          "errors": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Errors"
          }
        },
        "additionalProperties": false,
        "type": "object",
        "required": [
          "asset_id",
          "fetched_count",
          "inserted_count",
          "updated_count"
        ],
        "title": "FARefreshResult",
        "description": "Result of refresh for single asset."
      },
      "FASectorArea-Input": {
        "properties": {
          "distribution": {
            "additionalProperties": {
              "anyOf": [
                {
                  "type": "number"
                },
                {
                  "type": "string",
                  "pattern": "^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$"
                }
              ]
            },
            "type": "object",
            "title": "Distribution",
            "description": "Distribution weights (must sum to 1.0)"
          }
        },
        "additionalProperties": false,
        "type": "object",
        "required": [
          "distribution"
        ],
        "title": "FASectorArea",
        "description": "Sector allocation distribution with standard classification.\n\nValidates sector names against FinancialSector enum:\n- Industrials, Technology, Financials, Consumer Discretionary,\n  Health Care, Real Estate, Basic Materials, Energy, Consumer Staples,\n  Telecommunication, Utilities, Other\n\nUnknown sectors are mapped to \"Other\" with warning log.\nWeights are automatically merged if multiple input keys map to same sector.\n\nExamples:\n    >>> sector_dist = FASectorArea(distribution={\n    ...     \"Technology\": Decimal(\"0.35\"),\n    ...     \"Financials\": Decimal(\"0.25\"),\n    ...     \"Health Care\": Decimal(\"0.40\")\n    ... })\n\n    >>> # Aliases and case-insensitive\n    >>> sector_dist = FASectorArea(distribution={\n    ...     \"technology\": 0.3,\n    ...     \"healthcare\": 0.3,  # Will be normalized to \"Health Care\"\n    ...     \"FINANCIALS\": 0.4\n    ... })"
      },
      "FASectorArea-Output": {
        "properties": {
          "distribution": {
            "additionalProperties": {
              "type": "string",
              "pattern": "^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$"
            },
            "type": "object",
            "title": "Distribution",
            "description": "Distribution weights (must sum to 1.0)"
          }
        },
        "additionalProperties": false,
        "type": "object",
        "required": [
          "distribution"
        ],
        "title": "FASectorArea",
        "description": "Sector allocation distribution with standard classification.\n\nValidates sector names against FinancialSector enum:\n- Industrials, Technology, Financials, Consumer Discretionary,\n  Health Care, Real Estate, Basic Materials, Energy, Consumer Staples,\n  Telecommunication, Utilities, Other\n\nUnknown sectors are mapped to \"Other\" with warning log.\nWeights are automatically merged if multiple input keys map to same sector.\n\nExamples:\n    >>> sector_dist = FASectorArea(distribution={\n    ...     \"Technology\": Decimal(\"0.35\"),\n    ...     \"Financials\": Decimal(\"0.25\"),\n    ...     \"Health Care\": Decimal(\"0.40\")\n    ... })\n\n    >>> # Aliases and case-insensitive\n    >>> sector_dist = FASectorArea(distribution={\n    ...     \"technology\": 0.3,\n    ...     \"healthcare\": 0.3,  # Will be normalized to \"Health Care\"\n    ...     \"FINANCIALS\": 0.4\n    ... })"
      },
      "FAUpsert": {
        "properties": {
          "asset_id": {
            "type": "integer",
            "title": "Asset Id",
            "description": "Asset ID"
          },
          "prices": {
            "items": {
              "$ref": "#/components/schemas/FAPricePoint-Input"
            },
            "type": "array",
            "minItems": 1,
            "title": "Prices",
            "description": "List of price points"
          }
        },
        "additionalProperties": false,
        "type": "object",
        "required": [
          "asset_id",
          "prices"
        ],
        "title": "FAUpsert",
        "description": "Price upsert for a single asset (multiple dates).\n\nGroups multiple price points for one asset."
      },
      "FAUpsertResult": {
        "properties": {
          "asset_id": {
            "type": "integer",
            "title": "Asset Id"
          },
          "count": {
            "type": "integer",
            "title": "Count"
          },
          "message": {
            "type": "string",
            "title": "Message"
          }
        },
        "additionalProperties": false,
        "type": "object",
        "required": [
          "asset_id",
          "count",
          "message"
        ],
        "title": "FAUpsertResult",
        "description": "Result of price upsert for single asset."
      },
      "FAinfoResponse": {
        "properties": {
          "id": {
            "type": "integer",
            "title": "Id",
            "description": "Asset ID"
          },
          "display_name": {
            "type": "string",
            "title": "Display Name",
            "description": "Asset display name"
          },
          "currency": {
            "type": "string",
            "title": "Currency",
            "description": "Asset currency"
          },
          "icon_url": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Icon Url",
            "description": "Asset icon URL"
          },
          "asset_type": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Asset Type",
            "description": "Asset type"
          },
          "active": {
            "type": "boolean",
            "title": "Active",
            "description": "Whether asset is active"
          },
          "has_provider": {
            "type": "boolean",
            "title": "Has Provider",
            "description": "Whether asset has a provider assigned"
          },
          "has_metadata": {
            "type": "boolean",
            "title": "Has Metadata",
            "description": "Whether asset has classification metadata"
          },
          "identifier_isin": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Identifier Isin",
            "description": "ISIN code"
          },
          "identifier_ticker": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Identifier Ticker",
            "description": "Ticker symbol"
          },
          "identifier_cusip": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Identifier Cusip",
            "description": "CUSIP code"
          },
          "identifier_sedol": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Identifier Sedol",
            "description": "SEDOL code"
          },
          "identifier_figi": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Identifier Figi",
            "description": "FIGI code"
          },
          "identifier_uuid": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Identifier Uuid",
            "description": "UUID for custom assets"
          },
          "identifier_other": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Identifier Other",
            "description": "Other identifier"
          },
          "identifier": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Identifier",
            "description": "Primary identifier (from provider assignment)"
          },
          "identifier_type": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/IdentifierType"
              },
              {
                "type": "null"
              }
            ],
            "description": "Primary identifier type"
          }
        },
        "additionalProperties": false,
        "type": "object",
        "required": [
          "id",
          "display_name",
          "currency",
          "active",
          "has_provider",
          "has_metadata"
        ],
        "title": "FAinfoResponse",
        "description": "Single asset info - enhanced with identifier data for BRIM and frontend."
      },
      "FXBulkDeleteResponse": {
        "properties": {
          "results": {
            "items": {
              "$ref": "#/components/schemas/FXDeleteResult"
            },
            "type": "array",
            "title": "Results",
            "description": "Per-item operation results"
          },
          "success_count": {
            "type": "integer",
            "minimum": 0.0,
            "title": "Success Count",
            "description": "Number of successful operations"
          },
          "errors": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Errors",
            "description": "Operation-level errors (not per-item)"
          },
          "total_deleted": {
            "type": "integer",
            "minimum": 0.0,
            "title": "Total Deleted",
            "description": "Total number of records deleted across all items"
          }
        },
        "additionalProperties": false,
        "type": "object",
        "required": [
          "results",
          "success_count",
          "total_deleted"
        ],
        "title": "FXBulkDeleteResponse",
        "description": "Response model for bulk FX rate deletion."
      },
      "FXBulkUpsertResponse": {
        "properties": {
          "results": {
            "items": {
              "$ref": "#/components/schemas/FXUpsertResult"
            },
            "type": "array",
            "title": "Results",
            "description": "Per-item operation results"
          },
          "success_count": {
            "type": "integer",
            "minimum": 0.0,
            "title": "Success Count",
            "description": "Number of successful operations"
          },
          "errors": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Errors",
            "description": "Operation-level errors (not per-item)"
          }
        },
        "additionalProperties": false,
        "type": "object",
        "required": [
          "results",
          "success_count"
        ],
        "title": "FXBulkUpsertResponse",
        "description": "Response model for bulk rate upsert."
      },
      "FXConversionRequest": {
        "properties": {
          "from_amount": {
            "$ref": "#/components/schemas/Currency-Input",
            "description": "Amount to convert with source currency"
          },
          "to": {
            "type": "string",
            "maxLength": 3,
            "minLength": 3,
            "title": "To",
            "description": "Target currency (ISO 4217)"
          },
          "date_range": {
            "$ref": "#/components/schemas/DateRangeModel",
            "description": "Date range for conversion (start required, end optional for single day)"
          }
        },
        "type": "object",
        "required": [
          "from_amount",
          "to",
          "date_range"
        ],
        "title": "FXConversionRequest",
        "description": "Single conversion request with date range.\n\nBreaking change: Now uses Currency object for from_amount instead of\nseparate amount + from_currency fields."
      },
      "FXConversionResult": {
        "properties": {
          "from_amount": {
            "$ref": "#/components/schemas/Currency-Output",
            "description": "Original amount with source currency"
          },
          "to_amount": {
            "$ref": "#/components/schemas/Currency-Output",
            "description": "Converted amount with target currency"
          },
          "conversion_date": {
            "type": "string",
            "format": "date",
            "title": "Conversion Date",
            "description": "Date requested for conversion (ISO format)"
          },
          "rate": {
            "anyOf": [
              {
                "type": "string",
                "pattern": "^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$"
              },
              {
                "type": "null"
              }
            ],
            "title": "Rate",
            "description": "Exchange rate used (if not identity)"
          },
          "backward_fill_info": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/BackwardFillInfo"
              },
              {
                "type": "null"
              }
            ],
            "description": "Backward-fill info (only present if rate from a different date was used). If null, rate_date = conversion_date"
          }
        },
        "type": "object",
        "required": [
          "from_amount",
          "to_amount",
          "conversion_date"
        ],
        "title": "FXConversionResult",
        "description": "Single conversion result.\n\nBreaking change: Now uses Currency objects for from_amount and to_amount\ninstead of separate amount/currency fields."
      },
      "FXConvertResponse": {
        "properties": {
          "results": {
            "items": {
              "$ref": "#/components/schemas/FXConversionResult"
            },
            "type": "array",
            "title": "Results",
            "description": "Per-item operation results"
          },
          "success_count": {
            "type": "integer",
            "minimum": 0.0,
            "title": "Success Count",
            "description": "Number of successful operations"
          },
          "errors": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Errors",
            "description": "Operation-level errors (not per-item)"
          }
        },
        "additionalProperties": false,
        "type": "object",
        "required": [
          "results",
          "success_count"
        ],
        "title": "FXConvertResponse",
        "description": "Response model for bulk currency conversion."
      },
      "FXCreatePairSourcesResponse": {
        "properties": {
          "results": {
            "items": {
              "$ref": "#/components/schemas/FXPairSourceResult"
            },
            "type": "array",
            "title": "Results",
            "description": "Per-item operation results"
          },
          "success_count": {
            "type": "integer",
            "minimum": 0.0,
            "title": "Success Count",
            "description": "Number of successful operations"
          },
          "errors": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Errors",
            "description": "Operation-level errors (not per-item)"
          },
          "error_count": {
            "type": "integer",
            "title": "Error Count",
            "description": "Number of failed operations",
            "default": 0
          }
        },
        "additionalProperties": false,
        "type": "object",
        "required": [
          "results",
          "success_count"
        ],
        "title": "FXCreatePairSourcesResponse",
        "description": "Response model for bulk pair source creation."
      },
      "FXCurrenciesResponse": {
        "properties": {
          "currencies": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Currencies",
            "description": "List of available currency codes"
          },
          "count": {
            "type": "integer",
            "title": "Count",
            "description": "Number of available currencies"
          }
        },
        "type": "object",
        "required": [
          "currencies",
          "count"
        ],
        "title": "FXCurrenciesResponse",
        "description": "Response model for available currencies list."
      },
      "FXDeleteItem": {
        "properties": {
          "from": {
            "type": "string",
            "maxLength": 3,
            "minLength": 3,
            "title": "From",
            "description": "Source currency (ISO 4217)"
          },
          "to": {
            "type": "string",
            "maxLength": 3,
            "minLength": 3,
            "title": "To",
            "description": "Target currency (ISO 4217)"
          },
          "date_range": {
            "$ref": "#/components/schemas/DateRangeModel",
            "description": "Date range to delete (start required, end optional for single day)"
          }
        },
        "type": "object",
        "required": [
          "from",
          "to",
          "date_range"
        ],
        "title": "FXDeleteItem",
        "description": "Single rate deletion request."
      },
      "FXDeletePairSourceItem": {
        "properties": {
          "base": {
            "type": "string",
            "maxLength": 3,
            "minLength": 3,
            "title": "Base",
            "description": "Base currency (ISO 4217)"
          },
          "quote": {
            "type": "string",
            "maxLength": 3,
            "minLength": 3,
            "title": "Quote",
            "description": "Quote currency (ISO 4217)"
          },
          "priority": {
            "anyOf": [
              {
                "type": "integer",
                "minimum": 1.0
              },
              {
                "type": "null"
              }
            ],
            "title": "Priority",
            "description": "Priority level (optional, if not provided deletes all priorities)"
          }
        },
        "type": "object",
        "required": [
          "base",
          "quote"
        ],
        "title": "FXDeletePairSourceItem",
        "description": "Single pair source to delete."
      },
      "FXDeletePairSourceResult": {
        "properties": {
          "success": {
            "type": "boolean",
            "title": "Success",
            "description": "Whether the deletion succeeded"
          },
          "deleted_count": {
            "type": "integer",
            "minimum": 0.0,
            "title": "Deleted Count",
            "description": "Number of items deleted"
          },
          "message": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Message",
            "description": "Info/warning/error message"
          },
          "base": {
            "type": "string",
            "title": "Base",
            "description": "Base currency"
          },
          "quote": {
            "type": "string",
            "title": "Quote",
            "description": "Quote currency"
          },
          "priority": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Priority",
            "description": "Priority level (if specified)"
          }
        },
        "additionalProperties": false,
        "type": "object",
        "required": [
          "success",
          "deleted_count",
          "base",
          "quote"
        ],
        "title": "FXDeletePairSourceResult",
        "description": "Result of a single pair source deletion."
      },
      "FXDeletePairSourcesResponse": {
        "properties": {
          "results": {
            "items": {
              "$ref": "#/components/schemas/FXDeletePairSourceResult"
            },
            "type": "array",
            "title": "Results",
            "description": "Per-item operation results"
          },
          "success_count": {
            "type": "integer",
            "minimum": 0.0,
            "title": "Success Count",
            "description": "Number of successful operations"
          },
          "errors": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Errors",
            "description": "Operation-level errors (not per-item)"
          },
          "total_deleted": {
            "type": "integer",
            "minimum": 0.0,
            "title": "Total Deleted",
            "description": "Total number of records deleted across all items"
          }
        },
        "additionalProperties": false,
        "type": "object",
        "required": [
          "results",
          "success_count",
          "total_deleted"
        ],
        "title": "FXDeletePairSourcesResponse",
        "description": "Response model for DELETE /pair-sources/bulk."
      },
      "FXDeleteResult": {
        "properties": {
          "success": {
            "type": "boolean",
            "title": "Success",
            "description": "Whether the deletion succeeded"
          },
          "deleted_count": {
            "type": "integer",
            "minimum": 0.0,
            "title": "Deleted Count",
            "description": "Number of items deleted"
          },
          "message": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Message",
            "description": "Info/warning/error message"
          },
          "base": {
            "type": "string",
            "title": "Base",
            "description": "Base currency (normalized)"
          },
          "quote": {
            "type": "string",
            "title": "Quote",
            "description": "Quote currency (normalized)"
          },
          "date_range": {
            "$ref": "#/components/schemas/DateRangeModel",
            "description": "Date range deleted"
          },
          "existing_count": {
            "type": "integer",
            "title": "Existing Count",
            "description": "Number of rates present before deletion"
          }
        },
        "additionalProperties": false,
        "type": "object",
        "required": [
          "success",
          "deleted_count",
          "base",
          "quote",
          "date_range",
          "existing_count"
        ],
        "title": "FXDeleteResult",
        "description": "Single FX rate deletion result."
      },
      "FXPairSourceItem": {
        "properties": {
          "base": {
            "type": "string",
            "maxLength": 3,
            "minLength": 3,
            "title": "Base",
            "description": "Base currency (ISO 4217)"
          },
          "quote": {
            "type": "string",
            "maxLength": 3,
            "minLength": 3,
            "title": "Quote",
            "description": "Quote currency (ISO 4217)"
          },
          "provider_code": {
            "type": "string",
            "title": "Provider Code",
            "description": "Provider code (e.g., ECB, FED)"
          },
          "priority": {
            "type": "integer",
            "minimum": 1.0,
            "title": "Priority",
            "description": "Priority (1 = primary, 2+ = fallback)"
          }
        },
        "type": "object",
        "required": [
          "base",
          "quote",
          "provider_code",
          "priority"
        ],
        "title": "FXPairSourceItem",
        "description": "Configuration for a currency pair source."
      },
      "FXPairSourceResult": {
        "properties": {
          "success": {
            "type": "boolean",
            "title": "Success",
            "description": "Whether the operation succeeded"
          },
          "base": {
            "type": "string",
            "title": "Base",
            "description": "Base currency"
          },
          "quote": {
            "type": "string",
            "title": "Quote",
            "description": "Quote currency"
          },
          "provider_code": {
            "type": "string",
            "title": "Provider Code",
            "description": "Provider code"
          },
          "priority": {
            "type": "integer",
            "title": "Priority",
            "description": "Priority level"
          },
          "action": {
            "type": "string",
            "title": "Action",
            "description": "Action taken: 'created' or 'updated'"
          },
          "message": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Message",
            "description": "Additional info/warning"
          }
        },
        "type": "object",
        "required": [
          "success",
          "base",
          "quote",
          "provider_code",
          "priority",
          "action"
        ],
        "title": "FXPairSourceResult",
        "description": "Result of a single pair source creation/update."
      },
      "FXPairSourcesResponse": {
        "properties": {
          "sources": {
            "items": {
              "$ref": "#/components/schemas/FXPairSourceItem"
            },
            "type": "array",
            "title": "Sources",
            "description": "Configured pair sources"
          },
          "count": {
            "type": "integer",
            "title": "Count",
            "description": "Number of configured sources"
          }
        },
        "type": "object",
        "required": [
          "sources",
          "count"
        ],
        "title": "FXPairSourcesResponse",
        "description": "Response model for listing pair sources."
      },
      "FXProviderInfo": {
        "properties": {
          "code": {
            "type": "string",
            "title": "Code",
            "description": "Provider code (e.g., ECB, FED, BOE, SNB)"
          },
          "name": {
            "type": "string",
            "title": "Name",
            "description": "Provider full name"
          },
          "base_currency": {
            "type": "string",
            "title": "Base Currency",
            "description": "Default base currency"
          },
          "base_currencies": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Base Currencies",
            "description": "All supported base currencies"
          },
          "description": {
            "type": "string",
            "title": "Description",
            "description": "Provider description"
          },
          "icon_url": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Icon Url",
            "description": "Provider icon URL (hardcoded)"
          }
        },
        "type": "object",
        "required": [
          "code",
          "name",
          "base_currency",
          "base_currencies",
          "description"
        ],
        "title": "FXProviderInfo",
        "description": "Information about a single FX rate provider."
      },
      "FXSyncResponse": {
        "properties": {
          "synced": {
            "type": "integer",
            "title": "Synced",
            "description": "Number of new rates inserted/updated"
          },
          "date_range": {
            "$ref": "#/components/schemas/DateRangeModel",
            "description": "Date range synced"
          },
          "currencies": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Currencies",
            "description": "Currencies synced"
          }
        },
        "additionalProperties": false,
        "type": "object",
        "required": [
          "synced",
          "date_range",
          "currencies"
        ],
        "title": "FXSyncResponse",
        "description": "Response for FX rate synchronization from central banks.\n\nProvides summary of synced FX rates operation.\nDifferent structure from FA: summarizes overall sync with date range\nrather than per-asset results.\n\nMigrated from fx.py (was SyncResponseModel) to consolidate refresh/sync\noperations in single module for operational coherence."
      },
      "FXUpsertItem": {
        "properties": {
          "date": {
            "type": "string",
            "format": "date",
            "title": "Date",
            "description": "Date of the rate (ISO format)"
          },
          "base": {
            "type": "string",
            "maxLength": 3,
            "minLength": 3,
            "title": "Base",
            "description": "Base currency (ISO 4217)"
          },
          "quote": {
            "type": "string",
            "maxLength": 3,
            "minLength": 3,
            "title": "Quote",
            "description": "Quote currency (ISO 4217)"
          },
          "rate": {
            "anyOf": [
              {
                "type": "number",
                "exclusiveMinimum": 0.0
              },
              {
                "type": "string",
                "pattern": "^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$"
              }
            ],
            "title": "Rate",
            "description": "Exchange rate (must be positive)"
          },
          "source": {
            "type": "string",
            "title": "Source",
            "description": "Source of the rate",
            "default": "MANUAL"
          }
        },
        "type": "object",
        "required": [
          "date",
          "base",
          "quote",
          "rate"
        ],
        "title": "FXUpsertItem",
        "description": "Single rate to upsert."
      },
      "FXUpsertResult": {
        "properties": {
          "success": {
            "type": "boolean",
            "title": "Success",
            "description": "Whether the operation was successful"
          },
          "action": {
            "type": "string",
            "title": "Action",
            "description": "Action taken: 'inserted' or 'updated'"
          },
          "rate": {
            "type": "string",
            "pattern": "^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$",
            "title": "Rate",
            "description": "The rate value stored"
          },
          "date": {
            "type": "string",
            "format": "date",
            "title": "Date",
            "description": "Date of the rate (ISO format)"
          },
          "base": {
            "type": "string",
            "title": "Base",
            "description": "Base currency"
          },
          "quote": {
            "type": "string",
            "title": "Quote",
            "description": "Quote currency"
          }
        },
        "type": "object",
        "required": [
          "success",
          "action",
          "rate",
          "date",
          "base",
          "quote"
        ],
        "title": "FXUpsertResult",
        "description": "Single rate upsert result."
      },
      "HTTPValidationError": {
        "properties": {
          "detail": {
            "items": {
              "$ref": "#/components/schemas/ValidationError"
            },
            "type": "array",
            "title": "Detail"
          }
        },
        "type": "object",
        "title": "HTTPValidationError"
      },
      "IdentifierType": {
        "type": "string",
        "enum": [
          "ISIN",
          "TICKER",
          "CUSIP",
          "SEDOL",
          "FIGI",
          "UUID",
          "OTHER"
        ],
        "title": "IdentifierType",
        "description": "Asset identifier type.\n\nUsage: Specify which type of identifier is stored in the `identifier` field.\n\n- ISIN: International Securities Identification Number (e.g., US0378331005 for Apple)\n- TICKER: Stock ticker symbol (e.g., AAPL, MSFT)\n- CUSIP: Committee on Uniform Securities Identification Procedures (US/Canada)\n- SEDOL: Stock Exchange Daily Official List (UK)\n- FIGI: Financial Instrument Global Identifier (Bloomberg standard)\n- UUID: Universal Unique Identifier (for custom/synthetic assets)\n- OTHER: Any other identifier type not listed above\n\nImpact: Used for data validation and plugin selection. Some plugins may only\nwork with specific identifier types (e.g., Yahoo Finance prefers TICKER).\n\n\u26a0\ufe0f  DEPENDENT SCHEMAS - If you add/remove values, update these files:\n\n1. DATABASE SCHEMA:\n   - backend/alembic/versions/001_initial.py\n     \u2192 Add column: identifier_{value.lower()} in assets table\n     \u2192 Add index if frequently searched (ISIN, TICKER have indexes)\n\n2. SQLMODEL (this file):\n   - Asset class below\n     \u2192 Add field: identifier_{value.lower()}: Optional[str]\n     \u2192 Add validator if needed (e.g., ISIN requires 12 chars)\n\n3. PYDANTIC SCHEMAS (backend/app/schemas/assets.py):\n   - FAAssetCreateItem: Add identifier_{value.lower()} field\n   - FAAssetPatchItem: Add identifier_{value.lower()} field\n   - FAinfoResponse: Add identifier_{value.lower()} field\n   - FAAinfoFiltersRequest: Add filter field (exact or partial match)\n\n4. SERVICE LAYER (backend/app/services/asset_source.py):\n   - list_assets(): Add condition for new filter\n   - create_assets_bulk(): Pass new field to Asset()\n\n5. BRIM PROVIDER (backend/app/services/brim_provider.py):\n   - search_asset_candidates(): Add search priority if relevant\n\n6. TESTS:\n   - test_identifier_columns_match_enum() will FAIL automatically\n     if Asset.identifier_{value.lower()} is missing\n\nRun: pytest backend/test_scripts/test_db/db_schema_validate.py::test_identifier_columns_match_enum -v"
      },
      "OldNew_Union_str__NoneType__": {
        "properties": {
          "info": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Info",
            "description": "Info message/Field name"
          },
          "old": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Old",
            "description": "Old value"
          },
          "new": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "New",
            "description": "New value"
          }
        },
        "additionalProperties": false,
        "type": "object",
        "required": [
          "old",
          "new"
        ],
        "title": "OldNew[Union[str, NoneType]]"
      },
      "RestoreRequest": {
        "properties": {
          "file_id": {
            "type": "string",
            "title": "File Id"
          },
          "overwrite_existing": {
            "type": "boolean",
            "title": "Overwrite Existing",
            "default": false
          }
        },
        "type": "object",
        "required": [
          "file_id"
        ],
        "title": "RestoreRequest",
        "description": "Request to restore from backup."
      },
      "RestoreResponse": {
        "properties": {
          "success": {
            "type": "boolean",
            "title": "Success"
          },
          "restored_count": {
            "additionalProperties": true,
            "type": "object",
            "title": "Restored Count"
          },
          "warnings": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Warnings",
            "default": []
          }
        },
        "type": "object",
        "required": [
          "success",
          "restored_count"
        ],
        "title": "RestoreResponse",
        "description": "Response from restore operation."
      },
      "SectorListResponse": {
        "properties": {
          "sectors": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Sectors",
            "description": "List of standard financial sector names"
          },
          "count": {
            "type": "integer",
            "title": "Count",
            "description": "Number of sectors in the list"
          }
        },
        "additionalProperties": false,
        "type": "object",
        "required": [
          "sectors",
          "count"
        ],
        "title": "SectorListResponse",
        "description": "Response for sectors list endpoint."
      },
      "TXBulkCreateResponse": {
        "properties": {
          "results": {
            "items": {
              "$ref": "#/components/schemas/TXCreateResultItem"
            },
            "type": "array",
            "title": "Results",
            "description": "Per-item operation results"
          },
          "success_count": {
            "type": "integer",
            "minimum": 0.0,
            "title": "Success Count",
            "description": "Number of successful operations"
          },
          "errors": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Errors",
            "description": "Operation-level errors (not per-item)"
          }
        },
        "additionalProperties": false,
        "type": "object",
        "required": [
          "results",
          "success_count"
        ],
        "title": "TXBulkCreateResponse",
        "description": "Response for bulk transaction creation."
      },
      "TXBulkDeleteResponse": {
        "properties": {
          "results": {
            "items": {
              "$ref": "#/components/schemas/TXDeleteResult"
            },
            "type": "array",
            "title": "Results",
            "description": "Per-item operation results"
          },
          "success_count": {
            "type": "integer",
            "minimum": 0.0,
            "title": "Success Count",
            "description": "Number of successful operations"
          },
          "errors": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Errors",
            "description": "Operation-level errors (not per-item)"
          },
          "total_deleted": {
            "type": "integer",
            "minimum": 0.0,
            "title": "Total Deleted",
            "description": "Total number of records deleted across all items"
          }
        },
        "additionalProperties": false,
        "type": "object",
        "required": [
          "results",
          "success_count",
          "total_deleted"
        ],
        "title": "TXBulkDeleteResponse",
        "description": "Response for bulk transaction deletion."
      },
      "TXBulkUpdateResponse": {
        "properties": {
          "results": {
            "items": {
              "$ref": "#/components/schemas/TXUpdateResultItem"
            },
            "type": "array",
            "title": "Results",
            "description": "Per-item operation results"
          },
          "success_count": {
            "type": "integer",
            "minimum": 0.0,
            "title": "Success Count",
            "description": "Number of successful operations"
          },
          "errors": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Errors",
            "description": "Operation-level errors (not per-item)"
          }
        },
        "additionalProperties": false,
        "type": "object",
        "required": [
          "results",
          "success_count"
        ],
        "title": "TXBulkUpdateResponse",
        "description": "Response for bulk transaction update."
      },
      "TXCreateItem-Input": {
        "properties": {
          "broker_id": {
            "type": "integer",
            "exclusiveMinimum": 0.0,
            "title": "Broker Id",
            "description": "Broker ID"
          },
          "asset_id": {
            "anyOf": [
              {
                "type": "integer",
                "exclusiveMinimum": 0.0
              },
              {
                "type": "null"
              }
            ],
            "title": "Asset Id",
            "description": "Asset ID. NULL for pure cash transactions"
          },
          "type": {
            "$ref": "#/components/schemas/TransactionType",
            "description": "Transaction type"
          },
          "date": {
            "type": "string",
            "format": "date",
            "title": "Date",
            "description": "Settlement date"
          },
          "quantity": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "string",
                "pattern": "^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$"
              }
            ],
            "title": "Quantity",
            "description": "Asset quantity delta (+ in, - out)",
            "default": "0"
          },
          "cash": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/Currency-Input"
              },
              {
                "type": "null"
              }
            ],
            "description": "Cash movement (code + amount). Required for cash operations."
          },
          "link_uuid": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 36
              },
              {
                "type": "null"
              }
            ],
            "title": "Link Uuid",
            "description": "Temporary UUID to link paired transactions (TRANSFER, FX_CONVERSION)"
          },
          "tags": {
            "anyOf": [
              {
                "items": {
                  "type": "string"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Tags",
            "description": "List of tags for filtering/grouping"
          },
          "description": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 500
              },
              {
                "type": "null"
              }
            ],
            "title": "Description",
            "description": "Transaction notes"
          }
        },
        "additionalProperties": false,
        "type": "object",
        "required": [
          "broker_id",
          "type",
          "date"
        ],
        "title": "TXCreateItem",
        "description": "DTO for creating a single transaction.\n\nUsed by POST /api/v1/transactions endpoint.\n\nField semantics:\n- quantity: Asset delta (+ buy/in, - sell/out). Default 0.\n- cash: Currency object with code + amount. None if no cash movement.\n- link_uuid: Temporary UUID to link paired transactions in bulk create\n\nSign rules per type:\n- BUY: quantity > 0, cash.amount < 0\n- SELL: quantity < 0, cash.amount > 0\n- DIVIDEND/INTEREST: quantity = 0, cash.amount > 0\n- DEPOSIT: quantity = 0, cash.amount > 0\n- WITHDRAWAL: quantity = 0, cash.amount < 0\n- FEE/TAX: quantity = 0, cash.amount < 0\n- TRANSFER: quantity +/-, cash = None, link_uuid REQUIRED\n- FX_CONVERSION: quantity = 0, cash.amount +/-, link_uuid REQUIRED\n- ADJUSTMENT: quantity +/-, cash = None"
      },
      "TXCreateItem-Output": {
        "properties": {
          "broker_id": {
            "type": "integer",
            "exclusiveMinimum": 0.0,
            "title": "Broker Id",
            "description": "Broker ID"
          },
          "asset_id": {
            "anyOf": [
              {
                "type": "integer",
                "exclusiveMinimum": 0.0
              },
              {
                "type": "null"
              }
            ],
            "title": "Asset Id",
            "description": "Asset ID. NULL for pure cash transactions"
          },
          "type": {
            "$ref": "#/components/schemas/TransactionType",
            "description": "Transaction type"
          },
          "date": {
            "type": "string",
            "format": "date",
            "title": "Date",
            "description": "Settlement date"
          },
          "quantity": {
            "type": "string",
            "pattern": "^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$",
            "title": "Quantity",
            "description": "Asset quantity delta (+ in, - out)",
            "default": "0"
          },
          "cash": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/Currency-Output"
              },
              {
                "type": "null"
              }
            ],
            "description": "Cash movement (code + amount). Required for cash operations."
          },
          "link_uuid": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 36
              },
              {
                "type": "null"
              }
            ],
            "title": "Link Uuid",
            "description": "Temporary UUID to link paired transactions (TRANSFER, FX_CONVERSION)"
          },
          "tags": {
            "anyOf": [
              {
                "items": {
                  "type": "string"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Tags",
            "description": "List of tags for filtering/grouping"
          },
          "description": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 500
              },
              {
                "type": "null"
              }
            ],
            "title": "Description",
            "description": "Transaction notes"
          }
        },
        "additionalProperties": false,
        "type": "object",
        "required": [
          "broker_id",
          "type",
          "date"
        ],
        "title": "TXCreateItem",
        "description": "DTO for creating a single transaction.\n\nUsed by POST /api/v1/transactions endpoint.\n\nField semantics:\n- quantity: Asset delta (+ buy/in, - sell/out). Default 0.\n- cash: Currency object with code + amount. None if no cash movement.\n- link_uuid: Temporary UUID to link paired transactions in bulk create\n\nSign rules per type:\n- BUY: quantity > 0, cash.amount < 0\n- SELL: quantity < 0, cash.amount > 0\n- DIVIDEND/INTEREST: quantity = 0, cash.amount > 0\n- DEPOSIT: quantity = 0, cash.amount > 0\n- WITHDRAWAL: quantity = 0, cash.amount < 0\n- FEE/TAX: quantity = 0, cash.amount < 0\n- TRANSFER: quantity +/-, cash = None, link_uuid REQUIRED\n- FX_CONVERSION: quantity = 0, cash.amount +/-, link_uuid REQUIRED\n- ADJUSTMENT: quantity +/-, cash = None"
      },
      "TXCreateResultItem": {
        "properties": {
          "success": {
            "type": "boolean",
            "title": "Success"
          },
          "transaction_id": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Transaction Id"
          },
          "link_uuid": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Link Uuid"
          },
          "error": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Error"
          }
        },
        "additionalProperties": false,
        "type": "object",
        "required": [
          "success"
        ],
        "title": "TXCreateResultItem",
        "description": "Result for a single transaction creation attempt."
      },
      "TXDeleteResult": {
        "properties": {
          "success": {
            "type": "boolean",
            "title": "Success",
            "description": "Whether the deletion succeeded"
          },
          "deleted_count": {
            "type": "integer",
            "minimum": 0.0,
            "title": "Deleted Count",
            "description": "Number of items deleted"
          },
          "message": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Message",
            "description": "Info/warning/error message"
          },
          "id": {
            "type": "integer",
            "title": "Id",
            "description": "Transaction ID"
          }
        },
        "additionalProperties": false,
        "type": "object",
        "required": [
          "success",
          "deleted_count",
          "id"
        ],
        "title": "TXDeleteResult",
        "description": "Result for a single transaction deletion attempt.\n\nExtends BaseDeleteResult with transaction-specific identifier."
      },
      "TXReadItem": {
        "properties": {
          "id": {
            "type": "integer",
            "title": "Id"
          },
          "broker_id": {
            "type": "integer",
            "title": "Broker Id"
          },
          "asset_id": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Asset Id"
          },
          "type": {
            "$ref": "#/components/schemas/TransactionType"
          },
          "date": {
            "type": "string",
            "format": "date",
            "title": "Date"
          },
          "quantity": {
            "type": "string",
            "pattern": "^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$",
            "title": "Quantity"
          },
          "cash": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/Currency-Output"
              },
              {
                "type": "null"
              }
            ]
          },
          "related_transaction_id": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Related Transaction Id"
          },
          "tags": {
            "anyOf": [
              {
                "items": {
                  "type": "string"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Tags"
          },
          "description": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Description"
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "title": "Created At"
          },
          "updated_at": {
            "type": "string",
            "format": "date-time",
            "title": "Updated At"
          }
        },
        "additionalProperties": false,
        "type": "object",
        "required": [
          "id",
          "broker_id",
          "type",
          "date",
          "quantity",
          "created_at",
          "updated_at"
        ],
        "title": "TXReadItem",
        "description": "DTO for reading a transaction from the API.\n\nThis is the response format for GET operations.\nUses Currency for cash representation.\n\nNote on linked transactions:\nWith bidirectional DEFERRABLE FK, related_transaction_id is populated\non BOTH transactions in a pair (A->B and B->A), so no separate\nlinked_transaction_id field is needed."
      },
      "TXTypeMetadata": {
        "properties": {
          "code": {
            "type": "string",
            "title": "Code",
            "description": "Enum code (e.g., 'BUY')"
          },
          "name": {
            "type": "string",
            "title": "Name",
            "description": "Display name"
          },
          "description": {
            "type": "string",
            "title": "Description",
            "description": "Human-readable description"
          },
          "icon": {
            "type": "string",
            "title": "Icon",
            "description": "Icon identifier or emoji"
          },
          "asset_mode": {
            "type": "string",
            "enum": [
              "REQUIRED",
              "OPTIONAL",
              "FORBIDDEN"
            ],
            "title": "Asset Mode",
            "description": "REQUIRED: must have asset_id, OPTIONAL: can have, FORBIDDEN: must not have"
          },
          "requires_link": {
            "type": "boolean",
            "title": "Requires Link",
            "description": "Whether link_uuid is required"
          },
          "requires_cash": {
            "type": "boolean",
            "title": "Requires Cash",
            "description": "Whether cash is required"
          },
          "allowed_quantity_sign": {
            "type": "string",
            "enum": [
              "+",
              "-",
              "0",
              "+/-"
            ],
            "title": "Allowed Quantity Sign",
            "description": "Allowed quantity sign"
          },
          "allowed_cash_sign": {
            "type": "string",
            "enum": [
              "+",
              "-",
              "0",
              "+/-"
            ],
            "title": "Allowed Cash Sign",
            "description": "Allowed cash amount sign"
          }
        },
        "additionalProperties": false,
        "type": "object",
        "required": [
          "code",
          "name",
          "description",
          "icon",
          "asset_mode",
          "requires_link",
          "requires_cash",
          "allowed_quantity_sign",
          "allowed_cash_sign"
        ],
        "title": "TXTypeMetadata",
        "description": "Metadata about a transaction type.\n\nUsed by GET /api/v1/transactions/types endpoint.\nFrontend uses this to validate user input before submission."
      },
      "TXUpdateItem": {
        "properties": {
          "id": {
            "type": "integer",
            "exclusiveMinimum": 0.0,
            "title": "Id",
            "description": "Transaction ID to update"
          },
          "date": {
            "anyOf": [
              {
                "type": "string",
                "format": "date"
              },
              {
                "type": "null"
              }
            ],
            "title": "Date",
            "description": "New settlement date"
          },
          "quantity": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "string",
                "pattern": "^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$"
              },
              {
                "type": "null"
              }
            ],
            "title": "Quantity",
            "description": "New quantity"
          },
          "cash": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/Currency-Input"
              },
              {
                "type": "null"
              }
            ],
            "description": "New cash (code + amount)"
          },
          "tags": {
            "anyOf": [
              {
                "items": {
                  "type": "string"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Tags",
            "description": "New tags (replaces existing)"
          },
          "description": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 500
              },
              {
                "type": "null"
              }
            ],
            "title": "Description",
            "description": "New description"
          }
        },
        "additionalProperties": false,
        "type": "object",
        "required": [
          "id"
        ],
        "title": "TXUpdateItem",
        "description": "DTO for updating a transaction.\n\nAll fields are optional except id.\nOnly provided fields will be updated.\n\nNote: Changing type is not allowed. Create a new transaction instead.\n\nNote on related_transaction_id:\nThis field cannot be updated directly via this DTO.\nTo update linked transactions (TRANSFER, FX_CONVERSION):\n1. Delete both transactions\n2. Re-create them with new link_uuid\nOr send updates for BOTH transactions in the same bulk request."
      },
      "TXUpdateResultItem": {
        "properties": {
          "id": {
            "type": "integer",
            "title": "Id"
          },
          "success": {
            "type": "boolean",
            "title": "Success"
          },
          "error": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Error"
          }
        },
        "additionalProperties": false,
        "type": "object",
        "required": [
          "id",
          "success"
        ],
        "title": "TXUpdateResultItem",
        "description": "Result for a single transaction update attempt."
      },
      "TransactionType": {
        "type": "string",
        "enum": [
          "BUY",
          "SELL",
          "DIVIDEND",
          "INTEREST",
          "DEPOSIT",
          "WITHDRAWAL",
          "FEE",
          "TAX",
          "TRANSFER",
          "FX_CONVERSION",
          "ADJUSTMENT"
        ],
        "title": "TransactionType",
        "description": "Unified transaction types for all asset and cash operations.\n\nThis enum represents all possible transaction types in the unified\ntransaction table. Each type has specific rules for quantity and amount signs.\n\n== Asset transactions (quantity != 0) ==\n\n- BUY: Purchase asset with cash\n  Signs: quantity > 0, amount < 0\n  Example: Buy 10 shares of AAPL for \u20ac1500\n\n- SELL: Sell asset for cash\n  Signs: quantity < 0, amount > 0\n  Example: Sell 5 shares of MSFT for \u20ac1500\n\n- TRANSFER: Asset transfer between brokers\n  Signs: quantity +/-, amount = 0\n  Requires: related_transaction_id (links to paired transfer)\n  Example: Transfer 100 shares from Broker A to Broker B\n\n- ADJUSTMENT: Manual asset quantity correction (splits, gifts, etc.)\n  Signs: quantity +/-, amount = 0\n  Optional: related_transaction_id\n  Example: Stock split 2:1 adds 100 shares\n\n== Cash-only transactions (quantity = 0) ==\n\n- DIVIDEND: Dividend payment received\n  Signs: quantity = 0, amount > 0\n  Example: Receive \u20ac50 dividend from AAPL\n\n- INTEREST: Interest payment received\n  Signs: quantity = 0, amount > 0\n  Example: Monthly interest from crowdfunding loan\n\n- DEPOSIT: Add cash to broker account\n  Signs: quantity = 0, amount > 0\n  Example: Transfer \u20ac1000 to broker\n\n- WITHDRAWAL: Remove cash from broker account\n  Signs: quantity = 0, amount < 0\n  Example: Withdraw \u20ac500 from broker\n\n- FEE: Fee or commission payment\n  Signs: quantity = 0, amount < 0\n  Example: \u20ac5 custody fee\n\n- TAX: Tax payment\n  Signs: quantity = 0, amount < 0\n  Example: \u20ac100 capital gains tax\n\n- FX_CONVERSION: Currency exchange\n  Signs: quantity = 0, amount +/-\n  Requires: related_transaction_id (links to paired conversion)\n  Example: Convert \u20ac1000 to $1090\n\nImpact:\n- TRANSFER and FX_CONVERSION require related_transaction_id\n- Validation ensures sign rules are followed\n- All calculations based on settlement date"
      },
      "ValidationError": {
        "properties": {
          "loc": {
            "items": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "integer"
                }
              ]
            },
            "type": "array",
            "title": "Location"
          },
          "msg": {
            "type": "string",
            "title": "Message"
          },
          "type": {
            "type": "string",
            "title": "Error Type"
          }
        },
        "type": "object",
        "required": [
          "loc",
          "msg",
          "type"
        ],
        "title": "ValidationError"
      }
    }
  }
}